<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>Scheduling Job Involving both RAM and CPU</title>
      <link href="/2018/12/15/OOD/Google/Scheduling-Job-Involving-RAM-and-CPU/"/>
      <url>/2018/12/15/OOD/Google/Scheduling-Job-Involving-RAM-and-CPU/</url>
      <content type="html"><![CDATA[<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>The question was part of a system design question, where I had to design 2 functions:</p><p>Schedule a Job<br>Check if Job is finished<br>The criteria for scheduling a job on a rack of machines, was that each job requires a certain amount of CPU &amp; RAM, and each machine has different amount of CPU &amp; RAM.</p><p>So how do I go about optimally scheduling jobs on it?</p><p>Multiple jobs could be scheduled on the same machine, as long as it can support it.</p><p>Second part was to check if the Job is finished or not.</p><h2 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h2><ol><li>Category the job with CPU&amp;Memory, such as S, M, L, XL.</li><li>Prioritize the job.</li><li>Use message queues to publish job. Meanwhile, provide an API layer to get job/update job info (including status)</li><li>Each worker node subscribe to the message queues.</li><li>Worker Node itself have logic to determine which kind of job it could get, based on its current CPU/Memory consumption.</li><li>The job running on worker node is isolated, worker node have daemon to monitor the job’s resource consumption/status, able to kill the job if found job is dead or exceed resource quota.</li><li>Worker node daemon will update job status to the API layer, periodically.</li><li>Have monitor to check the message queue length, dynamically scale machines.</li><li>Have monitors to monitor the job progress, if one job don’t have update for long time, mark the host worker node as un-healthy and release the job task. This monitor could co-locate on worker nodes and monitor each other.</li><li>Client side will poll the API layer directly to get the job status. If traffic is heavy, need to have cache layer behind API with in-validation logic</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> TreeSet&lt;Machine&gt; machinePool = <span class="keyword">new</span> TreeSet&lt;&gt;((a, b) -&gt; a.cpu != b.cpu ? a.cpu - b.cpu : (a.ram != b.ram ? a.ram - b.ram : a.core - b.core));</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Scheduler</span> </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> Future&lt;T&gt; <span class="title">submit</span><span class="params">(Task&lt;T&gt; task)</span> </span>&#123;</span><br><span class="line">        Machine required = <span class="keyword">new</span> Machine(task.cpu, task.ram, <span class="number">1</span>);</span><br><span class="line">        Machine found = machinePool.ceiling(required);</span><br><span class="line">        <span class="keyword">if</span> (!found) <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"All machine busy"</span>);</span><br><span class="line">        Future&lt;T&gt; future = found.submit(task);</span><br><span class="line">        machinePool.remove(found);</span><br><span class="line">        machinePool.add(found);    <span class="comment">// reorder</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Machine</span> </span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> AtomicInteger cpu, ram, core;  <span class="comment">// available cpu/ram</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> cfgCPU, cfgRAM, cfgCore;<span class="comment">// default configured CPU/RAM</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">final</span> Executor executor = ThreadPool.newWorkStealingPool();</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">Machine</span><span class="params">(<span class="keyword">int</span> cpu, <span class="keyword">int</span> ram, <span class="keyword">int</span> core)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">this</span>.cpu = <span class="keyword">new</span> AtomicInteger(<span class="keyword">this</span>.cfgCPU = cpu);</span><br><span class="line">         <span class="keyword">this</span>.ram = <span class="keyword">new</span> AtomicInteger(<span class="keyword">this</span>.cfgRAM = ram);</span><br><span class="line">         <span class="keyword">this</span>.core = <span class="keyword">new</span> AtomicInteger(<span class="keyword">this</span>.cfgCore = core);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Future&lt;T&gt; <span class="title">submit</span><span class="params">(<span class="keyword">final</span> Task&lt;T&gt; task)</span> </span>&#123;</span><br><span class="line">         <span class="keyword">if</span> (<span class="keyword">this</span>.cpu &lt; task.cpu || <span class="keyword">this</span>.ram &lt; task.ram) &#123;</span><br><span class="line">             <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Not enough resource"</span>);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">this</span>.cpu.set(<span class="keyword">this</span>.cpu.get() - task.cpu);</span><br><span class="line">         <span class="keyword">this</span>.ram.set(<span class="keyword">this</span>.ram.get() - task.ram);</span><br><span class="line">         <span class="keyword">this</span>.core.decrement();</span><br><span class="line">         <span class="keyword">return</span> executor.submit(() -&gt; &#123;</span><br><span class="line">               T res = task.execute();</span><br><span class="line">               <span class="keyword">this</span>.cpu.set(<span class="keyword">this</span>.cpu.get() + task.cpu);</span><br><span class="line">               <span class="keyword">this</span>.ram.set(<span class="keyword">this</span>.ram.get() + task.ram);</span><br><span class="line">               <span class="keyword">this</span>.core.increment();</span><br><span class="line">               machinePool.remove(<span class="keyword">this</span>);</span><br><span class="line">               machinePool.add(<span class="keyword">this</span>);    <span class="comment">// reorder</span></span><br><span class="line">               <span class="keyword">return</span> res;</span><br><span class="line">         &#125;);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Task</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> cpu, ram; <span class="comment">// required CPU, RAM for this task</span></span><br><span class="line">    <span class="function">T <span class="title">execute</span><span class="params">()</span></span>;    <span class="comment">// execute the task and return the computed result of type T</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OOD </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JVM Architecture</title>
      <link href="/2018/11/11/Java/JVM-Architecture/"/>
      <url>/2018/11/11/Java/JVM-Architecture/</url>
      <content type="html"><![CDATA[<blockquote><p>Reference from <a href="https://www.javainterviewpoint.com/java-virtual-machine-architecture-in-java/" target="_blank" rel="noopener">JVM Architecture – Understanding JVM Internals</a></p></blockquote><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>Every Java developer knows that bytecode will be executed by <strong>JRE</strong> (Java Runtime Environment). But many doesn’t know the fact that Interpreter is the implementation of <strong>Java Virtual Machine</strong> (JVM), which analyzes the bytecode, interprets the code and executes it. It is very important as a developer we should know the Architecture of JVM, this enables us to write code more efficiently. In this JVM architecture in Java with diagram article, we will learn more deeply about <strong>JVM architecture</strong> in Java and <strong>different components</strong> of a JVM.</p><h2 id="What-is-a-JVM-in-Java"><a href="#What-is-a-JVM-in-Java" class="headerlink" title="What is a JVM in Java ?"></a>What is a JVM in Java ?</h2><p>A <strong>Virtual Machine</strong> is a Software implementation of a Physical Machine, Java was developed with the concept of <strong>WORA</strong> <strong>( Write Once Run Anywhere )</strong> which runs on a VM. The compiler will be compiling the java file into a java .class file.  The .class file is input to JVM which Loads and executes the class file. Below goes the Architecture of JVM.<br><img src="https://javainterviewpoint-7ac9.kxcdn.com/wp-content/uploads/2016/01/JVM-Architecture.png" alt="JVM Architecture Diagram"></p><h2 id="How-JVM-works-in-Java"><a href="#How-JVM-works-in-Java" class="headerlink" title="How JVM works in Java ?"></a>How JVM works in Java ?</h2><p>As shown in the above architecture diagram JVM is divided into three main subsystems</p><ol><li><strong>Class Loader Subsystem</strong></li><li><strong>Runtime Data Area</strong></li><li><strong>Execution Engine</strong></li></ol><h3 id="1-Class-Loader-Subsystem"><a href="#1-Class-Loader-Subsystem" class="headerlink" title="1. Class Loader Subsystem"></a>1. Class Loader Subsystem</h3><p>Java’s dynamic class loading functionality is handled by the class loader subsystem. It loads, links and initializes the class when it refers to a class for the first time at <strong>runtime</strong>, not at <strong>compile-time</strong>. It performs three major functionality such as Loading, Linking, and Initialization.</p><h4 id="1-1-Loading"><a href="#1-1-Loading" class="headerlink" title="1.1 Loading"></a>1.1 Loading</h4><p>Classes will be loaded by this component. BootStrap ClassLoader, Extension ClassLoader, Application ClassLoader are the three class loader which will help in achieving it.</p><ol><li><strong>BootStrap ClassLoader</strong> – Responsible for loading classes from the bootstrap classpath, nothing but <strong>rt.jar</strong>. Highest priority will be given to this loader.</li><li><strong>Extension ClassLoader</strong> – Responsible for loading classes which are inside <strong>ext</strong> folder <strong>(jre\lib)</strong></li><li><strong>Application ClassLoader</strong> –Responsible for loading <strong>Application Level Classpath</strong>, path mentioned Environment Variable etc.</li></ol><p>The above <strong>Class Loaders</strong> will follow <strong>Delegation Hierarchy Algorithm</strong> while loading the class files.</p><h4 id="1-2-Linking"><a href="#1-2-Linking" class="headerlink" title="1.2 Linking"></a>1.2 Linking</h4><ol><li>Verify – Bytecode verifier will verify whether the generated bytecode is proper or not if verification fails we will get verification error</li><li>Prepare – For all static variables memory will be allocated and assigned with default values.</li><li>Resolve – All symbolic memory references are replaced with the original references from Method Area.</li></ol><h4 id="1-3-Initialization"><a href="#1-3-Initialization" class="headerlink" title="1.3 Initialization"></a>1.3 Initialization</h4><p>This is the final phase of Class Loading, here all static variable will be assigned with the original values and static block will be executed.</p><h3 id="2-Runtime-Data-Area"><a href="#2-Runtime-Data-Area" class="headerlink" title="2. Runtime Data Area"></a>2. Runtime Data Area</h3><p>Runtime Data Area is divided into 5 major components</p><ol><li><strong>Method Area</strong> – All the <strong>Class level data</strong> will be stored here including <strong>static variables</strong>. <strong>Method Area</strong> is <strong>one per JVM</strong> and it is a shared resource.</li><li><strong>Heap Area</strong> – All the <strong>Objects</strong> and its corresponding <strong>instance variables</strong> and <strong>arrays</strong> will be stored here. <strong>Heap Area</strong> is also <strong>one per JVM</strong> since <strong>Method area</strong> and <strong>Heap area</strong> shares memory for multiple threads the data stored is <strong>not thread safe.</strong></li><li><strong>Stack Area</strong> – For every thread, a separate <strong>runtime stack</strong> will be created. For every <strong>method call</strong>, one entry will be made in the stack memory which is called as <strong>Stack Frame</strong>. All <strong>local variables</strong> will be created in the stack memory. Stack area is thread safe since it is not a shared resource. Stack Frame is divided into three sub-entities such as<ol><li><strong>Local Variable Array</strong> – Related to the method how many <strong>local variables</strong> are involved and the corresponding values will be stored here.</li><li><strong>Operand stack</strong> – If any intermediate operation is required to perform, <strong>operand stack</strong> act as runtime workspace to perform the operation.</li><li><strong>Frame data</strong> – All symbols corresponding to the method is stored here. In the case of any <strong>exception</strong>, the catch block information will be maintained in the frame data.</li></ol></li><li><strong>PC Registers</strong> – Each thread will have separate PC Registers, to hold address of current executing instruction once the instruction is executed the <strong>PC register</strong> will be updated with the next instruction</li><li><strong>Native Method stacks</strong> – Native Method Stack holds native method information. For every thread, separate native method stack will be created.</li></ol><h3 id="3-Execution-Engine"><a href="#3-Execution-Engine" class="headerlink" title="3. Execution Engine"></a>3. Execution Engine</h3><p>The bytecode which is assigned to the Runtime Data Area will be executed by the Execution Engine. The Execution Engine reads the byte code and executes one by one.</p><ol><li><strong>Interpreter</strong> – Reads the bytecode, interprets it and executes it one by one. The interpreter interprets the bytecode faster but executes slowly. The disadvantage of the interpreter is that when one method called multiple times, every time interpretation is required.</li><li><strong>JIT Compiler</strong> – JIT Compiler neutralizes the disadvantage of the Interpreter ( a single method called multiple times, each time interpretation is required ), The Execution Engine will be using the help of Interpreter in converting but when it found repeated code it uses JIT compiler which compiles the entire bytecode and changes it to native code.  This native code will be used directly for repeated method calls which improve the performance of the system.<ol><li><strong>Intermediate Code generator</strong> – produces intermediate code</li><li><strong>Code Optimizer</strong> – Code Optimizer is responsible for optimizing the intermediate code generated above</li><li><strong>Target Code Generator</strong> – Target Code Generator is responsible for Generating Machine Code/ Native Code</li><li><strong>Profiler</strong> – <strong>Profiler</strong> is a special component, it is responsible for finding the hotspots (i.e) Used to identify whether the method is called multiple time or not.<br><strong>Garbage Collector</strong> : Garbage Collector is a part of Execution Engine, it collects/removes the unreferenced objects. Garbage Collection can be triggered by calling “System.gc()”, but the execution is not guaranteed. Garbage collector of JVM collects only those objects that are created by new keyword. So if you have created any object without new, you can use finalize method to perform cleanup.</li></ol></li></ol><p><strong>Java Native Interface</strong> (JNI):  JNI will be interacting with the Native Method Libraries and provides the Native Libraries required for the Execution Engine.</p><p><strong>Native Method Libraries</strong> : It is a Collection of the Native Libraries which is required for the Execution Engine.</p>]]></content>
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java 8 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Twitter Design</title>
      <link href="/2018/09/25/OOD/design-twitter/"/>
      <url>/2018/09/25/OOD/design-twitter/</url>
      <content type="html"><![CDATA[<h2 id="Problem-clarify"><a href="#Problem-clarify" class="headerlink" title="Problem clarify"></a>Problem clarify</h2><ol><li>No one expects you to design a real twitter in 50 minutes.</li><li>You need to focus on several core features first then dive deep.</li><li>Interviewer will guide you to specific field to get some property of you.</li></ol><h2 id="Core-features"><a href="#Core-features" class="headerlink" title="Core features"></a>Core features</h2><ol><li>Tweeting</li><li>Timeline<ul><li>User</li><li>Home</li></ul></li><li>Following</li></ol><h2 id="Naive-solution-Synchronous-DB-queries"><a href="#Naive-solution-Synchronous-DB-queries" class="headerlink" title="Naive solution (Synchronous DB queries)"></a>Naive solution (Synchronous DB queries)</h2><h3 id="Two-Tables-User-Table"><a href="#Two-Tables-User-Table" class="headerlink" title="Two Tables - User Table"></a>Two Tables - User Table</h3><table><thead><tr><th>ID</th><th>Name</th><th>…..</th></tr></thead><tbody><tr><td>ID1</td><td>Name1</td><td>…..</td></tr><tr><td>ID2</td><td>Name2</td><td>…..</td></tr><tr><td>ID3</td><td>Name3</td><td>…..</td></tr></tbody></table><h3 id="Two-Tables-Tweets-Table"><a href="#Two-Tables-Tweets-Table" class="headerlink" title="Two Tables - Tweets Table"></a>Two Tables - Tweets Table</h3><table><thead><tr><th>ID</th><th>Content</th><th>User</th></tr></thead><tbody><tr><td>ID1</td><td>Content1</td><td>User1</td></tr><tr><td>ID2</td><td>Content2</td><td>User2</td></tr><tr><td>ID3</td><td>Content3</td><td>User3</td></tr></tbody></table><p>User ID is the primary key of the User Table.</p><blockquote><p>A primary key is a special relational database table column (or combination of columns) designated to uniquely identify all table records.</p><p>A primary key’s main features are:</p><ul><li>It must contain a unique value for each row of data.</li><li>It cannot contain null values.</li></ul></blockquote><h2 id="Limitation-of-architecture-point-out-the-bottlenecks"><a href="#Limitation-of-architecture-point-out-the-bottlenecks" class="headerlink" title="Limitation of architecture (point out the bottlenecks)"></a>Limitation of architecture (point out the bottlenecks)</h2><p>It is impossible to retrieve the tweets in the one giant tweets table with millions of TPS.</p><h2 id="Characteristics-What-is-optimize-for"><a href="#Characteristics-What-is-optimize-for" class="headerlink" title="Characteristics (What is optimize for?)"></a>Characteristics (What is optimize for?)</h2><p>Focus more on availability than the data consistency. (eventual consistency)</p><h2 id="Optimized-solution-Give-high-level-overview"><a href="#Optimized-solution-Give-high-level-overview" class="headerlink" title="Optimized solution (Give high level overview)"></a>Optimized solution (Give high level overview)</h2><p><img src="https://i.imgur.com/7nnWqGk.png" alt="Twitter Post Design"><br><img src="https://i.imgur.com/mzxLDaP.png" alt="Twitter Get Design"></p><h2 id="Mixed-solution-In-memory-Database-Synchronous-DB-queries"><a href="#Mixed-solution-In-memory-Database-Synchronous-DB-queries" class="headerlink" title="Mixed solution (In memory Database + Synchronous DB queries)"></a>Mixed solution (In memory Database + Synchronous DB queries)</h2><p>We could mix the IMDB-Redis with Synchronous DB look-up of followers shows as above.</p><h2 id="Trade-off-Time-VS-Space"><a href="#Trade-off-Time-VS-Space" class="headerlink" title="Trade off (Time VS Space)"></a>Trade off (Time VS Space)</h2><p>Always could be negotiable between time and space.</p>]]></content>
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OOD </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>How to scale dropbox</title>
      <link href="/2018/09/25/OOD/how_to_scale_dropbox/"/>
      <url>/2018/09/25/OOD/how_to_scale_dropbox/</url>
      <content type="html"><![CDATA[<p>What is dropbox<br>Scale:<br>10s of millions of users<br>100s of millions of the file syncs per day.</p><p>Challenges</p><ol><li>Write volume.</li><li>ACIDity requirements (Atomicity, Consistency, Isolation, Durability)</li></ol><p>Example #1: High-level architecture<br>Phase 0:<br>Clients –&gt; The Server<br>This is the humble beginning of dropbox</p><p>Phase 1: (The sever is overloaded)<br>Clients –&gt; The Server –&gt; S3/DB(MySQL)</p><p>Phase 2: (The server may not endure downloading requests)<br>Clients –&gt; Meta Server –&gt; Notification Server –&gt; Clients<br>                          –&gt; DB</p><p>Clients –&gt; BlockServer(Uploading requests AWS EC2) –&gt; S3<br>                                                    –&gt; DB</p><p>Phase 3: (UPL caused by long distance, encapsulate whole logic in MetaServer, lack of load balancer, memcache)</p><p>Clients –&gt; LB –&gt; Meta Server (distributed) –&gt; Notification Server –&gt; Clients<br>                                             –&gt; memcache<br>                                             –&gt; DB</p><p>Clients –&gt; BlockServer –&gt; LB<br>                        –&gt; S3<br>Phase 4: (High Availability: make servers distributed)</p><p>Clients –&gt; LB (distributed)–&gt; Meta Server (distributed) –&gt; Notification Server(distributed) –&gt; Clients<br>                                             –&gt; memcache(distributed)<br>                                             –&gt; DB(distributed)</p><p>Clients –&gt; BlockServer (distributed) –&gt; LB(distributed)<br>                        –&gt; S3</p><p>Example #2: server_file_journal<br>Phase0:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &apos;server_file_journal&apos; (</span><br><span class="line">    &apos;id&apos; int(10) unsigned,</span><br><span class="line">    &apos;filename&apos; varchar(260),</span><br><span class="line">    &apos;casepath&apos; varchar(260),</span><br><span class="line">    &apos;latest&apos; tinyint(1),</span><br><span class="line">    &apos;ns_id&apos; int(10) unsigned,</span><br><span class="line">    [...]</span><br><span class="line">    PRIMARY KEY (&apos;id&apos;)</span><br><span class="line">  ) ENGINE = InnoDB;</span><br></pre></td></tr></table></figure></p><p>Phase1: Dropbox does not need casepath anymore<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &apos;server_file_journal&apos; (</span><br><span class="line">    &apos;id&apos; int(10) unsigned,</span><br><span class="line">    &apos;filename&apos; varchar(260),</span><br><span class="line">    &apos;latest&apos; tinyint(1),</span><br><span class="line">    &apos;ns_id&apos; int(10) unsigned,</span><br><span class="line">    [...]</span><br><span class="line">    PRIMARY KEY (&apos;id&apos;)</span><br><span class="line">  ) ENGINE = InnoDB;</span><br></pre></td></tr></table></figure></p><p>Phase2: Dropbox needs prev_rev<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &apos;server_file_journal&apos; (</span><br><span class="line">    &apos;id&apos; int(10) unsigned,</span><br><span class="line">    &apos;filename&apos; varchar(260),</span><br><span class="line">    &apos;latest&apos; tinyint(1),</span><br><span class="line">    &apos;ns_id&apos; int(10) unsigned,</span><br><span class="line">    &apos;prev_rev&apos; int(10) unsigned,</span><br><span class="line">    [...]</span><br><span class="line">    PRIMARY KEY (&apos;id&apos;)</span><br><span class="line">  ) ENGINE = InnoDB;</span><br></pre></td></tr></table></figure></p><p>Phase2: With customers growing, dropbox cannot only use id as the primary key.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &apos;server_file_journal&apos; (</span><br><span class="line">    &apos;id&apos; int(10) unsigned,</span><br><span class="line">    &apos;filename&apos; varchar(260),</span><br><span class="line">    &apos;latest&apos; tinyint(1),</span><br><span class="line">    &apos;ns_id&apos; int(10) unsigned,</span><br><span class="line">    &apos;prev_rev&apos; int(10) unsigned,</span><br><span class="line">    [...]</span><br><span class="line">    PRIMARY KEY (&apos;ns_id&apos;, &apos;latest&apos;, &apos;id&apos;)</span><br><span class="line">  ) ENGINE = InnoDB;</span><br></pre></td></tr></table></figure></p><p>Phase3: mySQL 255 need one byte which costs less space<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE &apos;server_file_journal&apos; (</span><br><span class="line">    &apos;id&apos; int(10) unsigned,</span><br><span class="line">    &apos;filename&apos; varchar(255),</span><br><span class="line">    &apos;latest&apos; tinyint(1),</span><br><span class="line">    &apos;ns_id&apos; int(10) unsigned,</span><br><span class="line">    &apos;prev_rev&apos; int(10) unsigned,</span><br><span class="line">    [...]</span><br><span class="line">    PRIMARY KEY (&apos;ns_id&apos;, &apos;latest&apos;, &apos;id&apos;)</span><br><span class="line">  ) ENGINE = InnoDB;</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OOD </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Shorten url system design</title>
      <link href="/2018/09/24/OOD/Short-url/"/>
      <url>/2018/09/24/OOD/Short-url/</url>
      <content type="html"><![CDATA[<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>Design a url shortening service. like bit.ly.</p><h2 id="Use-case"><a href="#Use-case" class="headerlink" title="Use case"></a>Use case</h2><ol><li>Shortening: given a url -&gt; return a much shorten url.</li><li>Redirection: take a shorten url -&gt; redirect to the original url.</li><li>Custom url.</li><li>High availability of the system.</li></ol><h2 id="Tasks-break-down"><a href="#Tasks-break-down" class="headerlink" title="Tasks break down"></a>Tasks break down</h2><ol><li>New urls per month: 100M.</li><li>1 billion request per month.</li><li>10% from shortening and 90% from redirection</li><li>Request per second: 400 (40: shortens; 360:redirection).</li><li>6 billions in 5 years.</li><li>500 bytes per url.</li><li>6 bytes per hash.</li><li>3TB for all urls, 36GB for all hashes (over 5 years).</li><li>New data was written per second: 40*(500+6):20K.</li><li>Data read per second: 360*506 bytes: 180K.</li></ol><h2 id="Abstract-Design"><a href="#Abstract-Design" class="headerlink" title="Abstract Design"></a>Abstract Design</h2><ol><li>Application service layer (serves the requests)</li></ol><ul><li>shortening service.</li><li>redirection service.</li></ul><ol start="2"><li>Data storage layer (keeps track the hash -&gt; url mappings)</li></ol><ul><li>Acts like a big hash table: stores new mappings and retrieves a value given a key.</li></ul><p>hashed_url = convert_to_base62(md5(orginal_url + random_salt))[:6]</p><h2 id="Bottlenecks"><a href="#Bottlenecks" class="headerlink" title="Bottlenecks"></a>Bottlenecks</h2><p>Traffic is probably not going to be very hard, data - more interesting.</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><p><a href="https://en.wikipedia.org/wiki/MD5" target="_blank" rel="noopener">MD5</a><br><a href="https://en.wikipedia.org/wiki/SHA-1" target="_blank" rel="noopener">SHA-1</a></p>]]></content>
      
      <categories>
          
          <category> Interview </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OOD </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Http response status code</title>
      <link href="/2018/09/23/Http/Http-response-status-code/"/>
      <url>/2018/09/23/Http/Http-response-status-code/</url>
      <content type="html"><![CDATA[<blockquote><p>Reference from <a href="https://learning.linkedin.com/blog/learning-tips/body-language-to-make-a-good-impression" target="_blank" rel="noopener">MDN Web docs</a></p></blockquote><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>HTTP response status codes indicate whether a specific <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP" target="_blank" rel="noopener">HTTP</a> request has been successfully completed. Responses are grouped in five classes: informational responses, successful responses, redirects, client errors, and servers errors. Status codes are defined by <a href="https://tools.ietf.org/html/rfc2616#section-10" target="_blank" rel="noopener">section 10 of RFC 2616.</a></p><h2 id="Information-responses"><a href="#Information-responses" class="headerlink" title="Information responses"></a>Information responses</h2><h3 id="100-Continue"><a href="#100-Continue" class="headerlink" title="100 Continue"></a>100 Continue</h3><p>This interim response indicates that everything so far is OK and that the client should continue with the request or ignore it if it is already finished.</p><h3 id="101-Switching-Protocol"><a href="#101-Switching-Protocol" class="headerlink" title="101 Switching Protocol"></a>101 Switching Protocol</h3><p>This code is sent in response to an <code>Upgrade</code> request header by the client, and indicates the protocol the server is switching to.</p><h3 id="102-Processing"><a href="#102-Processing" class="headerlink" title="102 Processing"></a>102 Processing</h3><p>This code indicates that the server has received and is processing the request, but no response is available yet.</p><h2 id="Successful-responses"><a href="#Successful-responses" class="headerlink" title="Successful responses"></a>Successful responses</h2><h3 id="200-OK"><a href="#200-OK" class="headerlink" title="200 OK"></a>200 OK</h3><p>The request has succeeded. The meaning of a success varies depending on the HTTP method:</p><ul><li>GET: The resource has been fetched and is transmitted in the message body.</li><li>HEAD: The entity headers are in the message body.</li><li>PUT or POST: The resource describing the result of the action is transmitted in the message body.</li><li>TRACE: The message body contains the request message as received by the server</li></ul><h3 id="201-Created"><a href="#201-Created" class="headerlink" title="201 Created"></a>201 Created</h3><p>The request has succeeded and a new resource has been created as a result of it. This is typically the response sent after a POST request, or after some PUT requests.</p><h3 id="202-Accepted"><a href="#202-Accepted" class="headerlink" title="202 Accepted"></a>202 Accepted</h3><p>The request has been received but not yet acted upon. It is non-committal, meaning that there is no way in HTTP to later send an asynchronous response indicating the outcome of processing the request. It is intended for cases where another process or server handles the request, or for batch processing.</p><h3 id="203-Non-Authoritative-Information"><a href="#203-Non-Authoritative-Information" class="headerlink" title="203 Non-Authoritative Information"></a>203 Non-Authoritative Information</h3><p>This response code means returned meta-information set is not exact set as available from the origin server, but collected from a local or a third party copy. Except this condition, 200 OK response should be preferred instead of this response.</p><h3 id="204-No-Content"><a href="#204-No-Content" class="headerlink" title="204 No Content"></a>204 No Content</h3><p>There is no content to send for this request, but the headers may be useful. The user-agent may update its cached headers for this resource with the new ones.</p><h3 id="205-Reset-Content"><a href="#205-Reset-Content" class="headerlink" title="205 Reset Content"></a>205 Reset Content</h3><p>This response code is used because of range header sent by the client to separate download into multiple streams.</p><h2 id="Redirection-messages"><a href="#Redirection-messages" class="headerlink" title="Redirection messages"></a>Redirection messages</h2><h3 id="300-Multiple-Choice"><a href="#300-Multiple-Choice" class="headerlink" title="300 Multiple Choice"></a>300 Multiple Choice</h3><p>The request has more than one possible response. The user-agent or user should choose one of them. There is no standardized way of choosing one of the responses.</p><h3 id="301-Moved-Permanently"><a href="#301-Moved-Permanently" class="headerlink" title="301 Moved Permanently"></a>301 Moved Permanently</h3><p>This response code means that the URI of the requested resource has been changed. Probably, the new URI would be given in the response.</p><h3 id="302-Found"><a href="#302-Found" class="headerlink" title="302 Found"></a>302 Found</h3><p>This response code means that the URI of requested resource has been changed <em>temporarily</em> New changes in the URI might be made in the future. Therefore, this same URI should be used by the client in future requests.</p><h3 id="303-See-Other"><a href="#303-See-Other" class="headerlink" title="303 See Other"></a>303 See Other</h3><p>The server sent this response to direct the client to get the requested resource at another URI with a GET request.</p><h3 id="304-Not-Modified"><a href="#304-Not-Modified" class="headerlink" title="304 Not Modified"></a>304 Not Modified</h3><p>This is used for caching purposes. It tells the client that the response has not been modified, so the client can continue to use the same cached version of the response.</p><h3 id="305-Use-Proxy"><a href="#305-Use-Proxy" class="headerlink" title="305 Use Proxy"></a><del>305 Use Proxy</del></h3><p>Was defined in a previous version of the HTTP specification to indicate that a requested response must be accessed by a proxy. It has been deprecated due to security concerns regarding in-band configuration of a proxy.</p><h3 id="306-unused"><a href="#306-unused" class="headerlink" title="306 unused"></a><del>306 unused</del></h3><p>This response code is no longer used, it is just reserved currently. It was used in a previous version of the HTTP 1.1 specification.</p><h3 id="307-Temporary-Redirect"><a href="#307-Temporary-Redirect" class="headerlink" title="307 Temporary Redirect"></a>307 Temporary Redirect</h3><p>The server sends this response to direct the client to get the requested resource at another URI with same method that was used in the prior request. This has the same semantics as the <code>302 Found</code> HTTP response code, with the exception that the user agent must not change the HTTP method used: If a <code>POST</code> was used in the first request, a <code>POST</code> must be used in the second request.</p><h3 id="308-Permanent-Redirect"><a href="#308-Permanent-Redirect" class="headerlink" title="308 Permanent Redirect"></a>308 Permanent Redirect</h3><p>This means that the resource is now permanently located at another URI, specified by the <code>Location:</code> HTTP Response header. This has the same semantics as the <code>301 Moved Permanently</code> HTTP response code, with the exception that the user agent must not change the HTTP method used: If a <code>POST</code> was used in the first request, a <code>POST</code> must be used in the second request.</p><h2 id="Client-error-responses"><a href="#Client-error-responses" class="headerlink" title="Client error responses"></a>Client error responses</h2><h3 id="400-Bad-Request"><a href="#400-Bad-Request" class="headerlink" title="400 Bad Request"></a>400 Bad Request</h3><p>This response means that server could not understand the request due to invalid syntax.</p><h3 id="401-Unauthorized"><a href="#401-Unauthorized" class="headerlink" title="401 Unauthorized"></a>401 Unauthorized</h3><p>Although the HTTP standard specifies “unauthorized”, semantically this response means “unauthenticated”. That is, the client must authenticate itself to get the requested response.</p><h3 id="402-Payment-Required"><a href="#402-Payment-Required" class="headerlink" title="402 Payment Required"></a>402 Payment Required</h3><p>This response code is reserved for future use. Initial aim for creating this code was using it for digital payment systems however this is not used currently.</p><h3 id="403-Forbidden"><a href="#403-Forbidden" class="headerlink" title="403 Forbidden"></a>403 Forbidden</h3><p>The client does not have access rights to the content, i.e. they are unauthorized, so server is rejecting to give proper response. Unlike 401, the client’s identity is known to the server.</p><h3 id="404-Not-Found"><a href="#404-Not-Found" class="headerlink" title="404 Not Found"></a>404 Not Found</h3><p>The server can not find requested resource. In the browser, this means the URL is not recognized. In an API, this can also mean that the endpoint is valid but the resource itself does not exist. Servers may also send this response instead of 403 to hide the existence of a resource from an unauthorized client. This response code is probably the most famous one due to its frequent occurrence on the web.</p><h3 id="405-Method-Not-Allowed"><a href="#405-Method-Not-Allowed" class="headerlink" title="405 Method Not Allowed"></a>405 Method Not Allowed</h3><p>The request method is known by the server but has been disabled and cannot be used. For example, an API may forbid DELETE-ing a resource. The two mandatory methods, <code>GET</code> and <code>HEAD</code>, must never be disabled and should not return this error code.</p><h3 id="406-Not-Acceptable"><a href="#406-Not-Acceptable" class="headerlink" title="406 Not Acceptable"></a>406 Not Acceptable</h3><p>This response is sent when the web server, after performing server-driven content negotiation, doesn’t find any content following the criteria given by the user agent.</p><h3 id="407-Proxy-Authentication-Required"><a href="#407-Proxy-Authentication-Required" class="headerlink" title="407 Proxy Authentication Required"></a>407 Proxy Authentication Required</h3><p>This is similar to 401 but authentication is needed to be done by a proxy.</p><h3 id="408-Request-Timeout"><a href="#408-Request-Timeout" class="headerlink" title="408 Request Timeout"></a>408 Request Timeout</h3><p>This response is sent on an idle connection by some servers, even without any previous request by the client. It means that the server would like to shut down this unused connection. This response is used much more since some browsers, like Chrome, Firefox 27+, or IE9, use HTTP pre-connection mechanisms to speed up surfing. Also note that some servers merely shut down the connection without sending this message.</p><h3 id="409-Conflict"><a href="#409-Conflict" class="headerlink" title="409 Conflict"></a>409 Conflict</h3><p>This response is sent when a request conflicts with the current state of the server.</p><h3 id="410-Gone"><a href="#410-Gone" class="headerlink" title="410 Gone"></a>410 Gone</h3><p>This response would be sent when the requested content has been permanently deleted from server, with no forwarding address. Clients are expected to remove their caches and links to the resource. The HTTP specification intends this status code to be used for “limited-time, promotional services”. APIs should not feel compelled to indicate resources that have been deleted with this status code.</p><h3 id="411-Length-Required"><a href="#411-Length-Required" class="headerlink" title="411 Length Required"></a>411 Length Required</h3><p>Server rejected the request because the Content-Length header field is not defined and the server requires it.</p><h3 id="412-Precondition-Failed"><a href="#412-Precondition-Failed" class="headerlink" title="412 Precondition Failed"></a>412 Precondition Failed</h3><p>The client has indicated preconditions in its headers which the server does not meet.</p><h3 id="413-Payload-Too-Large"><a href="#413-Payload-Too-Large" class="headerlink" title="413 Payload Too Large"></a>413 Payload Too Large</h3><p>Request entity is larger than limits defined by server; the server might close the connection or return an <code>Retry-After</code> header field.</p><h3 id="414-URI-Too-Long"><a href="#414-URI-Too-Long" class="headerlink" title="414 URI Too Long"></a>414 URI Too Long</h3><p>The URI requested by the client is longer than the server is willing to interpret.</p><h3 id="415-Unsupported-Media-Type"><a href="#415-Unsupported-Media-Type" class="headerlink" title="415 Unsupported Media Type"></a>415 Unsupported Media Type</h3><p>The media format of the requested data is not supported by the server, so the server is rejecting the request.</p><h3 id="416-Requested-Range-Not-Satisfiable"><a href="#416-Requested-Range-Not-Satisfiable" class="headerlink" title="416 Requested Range Not Satisfiable"></a>416 Requested Range Not Satisfiable</h3><p>The range specified by the <code>Range</code> header field in the request can’t be fulfilled; it’s possible that the range is outside the size of the target URI’s data.</p><h3 id="417-Expectation-Failed"><a href="#417-Expectation-Failed" class="headerlink" title="417 Expectation Failed"></a>417 Expectation Failed</h3><p>This response code means the expectation indicated by the <code>Expect</code> request header field can’t be met by the server.</p><h3 id="418-I’m-a-teapot"><a href="#418-I’m-a-teapot" class="headerlink" title="418 I’m a teapot"></a>418 I’m a teapot</h3><p>The server refuses the attempt to brew coffee with a teapot.</p><h3 id="421-Misdirected-Request"><a href="#421-Misdirected-Request" class="headerlink" title="421 Misdirected Request"></a>421 Misdirected Request</h3><p>The request was directed at a server that is not able to produce a response. This can be sent by a server that is not configured to produce responses for the combination of scheme and authority that are included in the request URI.</p><h3 id="422-Unprocessable-Entity-WebDAV"><a href="#422-Unprocessable-Entity-WebDAV" class="headerlink" title="422 Unprocessable Entity (WebDAV)"></a>422 Unprocessable Entity (WebDAV)</h3><p>The request was well-formed but was unable to be followed due to semantic errors.</p><h3 id="423-Locked-WebDAV"><a href="#423-Locked-WebDAV" class="headerlink" title="423 Locked (WebDAV)"></a>423 Locked (WebDAV)</h3><p>The resource that is being accessed is locked.</p><h3 id="424-Failed-Dependency-WebDAV"><a href="#424-Failed-Dependency-WebDAV" class="headerlink" title="424 Failed Dependency (WebDAV)"></a>424 Failed Dependency (WebDAV)</h3><p>The request failed due to failure of a previous request.</p><h3 id="425-Too-Early"><a href="#425-Too-Early" class="headerlink" title="425 Too Early"></a>425 Too Early</h3><p>Indicates that the server is unwilling to risk processing a request that might be replayed.</p><h3 id="426-Upgrade-Required"><a href="#426-Upgrade-Required" class="headerlink" title="426 Upgrade Required"></a>426 Upgrade Required</h3><p>The server refuses to perform the request using the current protocol but might be willing to do so after the client upgrades to a different protocol. The server sends an Upgrade header in a <code>426 response</code> to indicate the required protocol(s).</p><h3 id="428-Precondition-Required"><a href="#428-Precondition-Required" class="headerlink" title="428 Precondition Required"></a>428 Precondition Required</h3><p>The origin server requires the request to be conditional. Intended to prevent the ‘lost update’ problem, where a client GETs a resource’s state, modifies it, and PUTs it back to the server, when meanwhile a third party has modified the state on the server, leading to a conflict.</p><h3 id="429-Too-Many-Requests"><a href="#429-Too-Many-Requests" class="headerlink" title="429 Too Many Requests"></a>429 Too Many Requests</h3><p>The user has sent too many requests in a given amount of time (“rate limiting”).</p><h3 id="431-Request-Header-Fields-Too-Large"><a href="#431-Request-Header-Fields-Too-Large" class="headerlink" title="431 Request Header Fields Too Large"></a>431 Request Header Fields Too Large</h3><p>The server is unwilling to process the request because its header fields are too large. The request MAY be resubmitted after reducing the size of the request header fields<br>.</p><h3 id="451-Unavailable-For-Legal-Reasons"><a href="#451-Unavailable-For-Legal-Reasons" class="headerlink" title="451 Unavailable For Legal Reasons"></a>451 Unavailable For Legal Reasons</h3><p>The user requests an illegal resource, such as a web page censored by a government.</p><h2 id="Server-error-responses"><a href="#Server-error-responses" class="headerlink" title="Server error responses"></a>Server error responses</h2><h3 id="500-Internal-Server-Error"><a href="#500-Internal-Server-Error" class="headerlink" title="500 Internal Server Error"></a>500 Internal Server Error</h3><p>The server has encountered a situation it doesn’t know how to handle.</p><h3 id="501-Not-Implemented"><a href="#501-Not-Implemented" class="headerlink" title="501 Not Implemented"></a>501 Not Implemented</h3><p>The request method is not supported by the server and cannot be handled. The only methods that servers are required to support (and therefore that must not return this code) are <code>GET</code> and <code>HEAD</code>.</p><h3 id="502-Bad-Gateway"><a href="#502-Bad-Gateway" class="headerlink" title="502 Bad Gateway"></a>502 Bad Gateway</h3><p>This error response means that the server, while working as a gateway to get a response needed to handle the request, got an invalid response.</p><h3 id="503-Service-Unavailable"><a href="#503-Service-Unavailable" class="headerlink" title="503 Service Unavailable"></a>503 Service Unavailable</h3><p>The server is not ready to handle the request. Common causes are a server that is down for maintenance or that is overloaded. Note that together with this response, a user-friendly page explaining the problem should be sent. This responses should be used for temporary conditions and the <code>Retry-After</code>: HTTP header should, if possible, contain the estimated time before the recovery of the service. The webmaster must also take care about the caching-related headers that are sent along with this response, as these temporary condition responses should usually not be cached.</p><h3 id="504-Gateway-Timeout"><a href="#504-Gateway-Timeout" class="headerlink" title="504 Gateway Timeout"></a>504 Gateway Timeout</h3><p>This error response is given when the server is acting as a gateway and cannot get a response in time.</p><h3 id="505-HTTP-Version-Not-Supported"><a href="#505-HTTP-Version-Not-Supported" class="headerlink" title="505 HTTP Version Not Supported"></a>505 HTTP Version Not Supported</h3><p>The HTTP version used in the request is not supported by the server.</p><h3 id="506-Variant-Also-Negotiates"><a href="#506-Variant-Also-Negotiates" class="headerlink" title="506 Variant Also Negotiates"></a>506 Variant Also Negotiates</h3><p>The server has an internal configuration error: transparent content negotiation for the request results in a circular reference.</p><h3 id="507-Insufficient-Storage"><a href="#507-Insufficient-Storage" class="headerlink" title="507 Insufficient Storage"></a>507 Insufficient Storage</h3><p>The server has an internal configuration error: the chosen variant resource is configured to engage in transparent content negotiation itself, and is therefore not a proper end point in the negotiation process.</p><h3 id="508-Loop-Detected-WebDAV"><a href="#508-Loop-Detected-WebDAV" class="headerlink" title="508 Loop Detected (WebDAV)"></a>508 Loop Detected (WebDAV)</h3><p>The server detected an infinite loop while processing the request.</p><h3 id="510-Not-Extended"><a href="#510-Not-Extended" class="headerlink" title="510 Not Extended"></a>510 Not Extended</h3><p>Further extensions to the request are required for the server to fulfill it.</p><h3 id="511-Network-Authentication-Required"><a href="#511-Network-Authentication-Required" class="headerlink" title="511 Network Authentication Required"></a>511 Network Authentication Required</h3><p>The 511 status code indicates that the client needs to authenticate to gain network access.</p>]]></content>
      
      <categories>
          
          <category> Network </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Http </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Leetcode 1-10</title>
      <link href="/2018/09/09/Leetcode/Leetcode-1-to-10/"/>
      <url>/2018/09/09/Leetcode/Leetcode-1-to-10/</url>
      <content type="html"><![CDATA[<h2 id="1-Two-Sum"><a href="#1-Two-Sum" class="headerlink" title="1. Two Sum"></a>1. Two Sum</h2><p>🍏🍏🍏</p><p>Given an array of integers, return <strong>indices</strong> of the two numbers such that they add up to a specific target.</p><p>You may assume that each input would have <strong>exactly</strong> one solution, and you may not use the same element twice.</p><p><strong>Example</strong>:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Given nums = [2, 7, 11, 15], target = 9,</span><br><span class="line"></span><br><span class="line">Because nums[0] + nums[1] = 2 + 7 = 9,</span><br><span class="line">return [0, 1].</span><br></pre></td></tr></table></figure><p>Solution 1:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] resultArray = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; nums.length; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (nums[i] + nums[j] == target) &#123;</span><br><span class="line">                    resultArray[<span class="number">0</span>] = i;</span><br><span class="line">                    resultArray[<span class="number">1</span>] = j;</span><br><span class="line">                    <span class="keyword">return</span> resultArray;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> resultArray;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Performance: 27ms</p><p>Solution 2:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span>[] twoSum(<span class="keyword">int</span>[] nums, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nums == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span>[] result = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line">        HashMap&lt;Integer, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;Integer, Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(target - nums[i]))&#123;</span><br><span class="line">                result[<span class="number">0</span>] = map.get(target - nums[i]);</span><br><span class="line">                result[<span class="number">1</span>] = i;</span><br><span class="line">                <span class="keyword">return</span> result;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                map.put(nums[i], i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Performance: 9ms</p><h2 id="2-Add-Two-Numbers"><a href="#2-Add-Two-Numbers" class="headerlink" title="2. Add Two Numbers"></a>2. Add Two Numbers</h2><p>🍋🍋🍋</p><p>You are given two <strong>non-empty</strong> linked lists representing two non-negative integers. The digits are stored in <strong>reverse order</strong> and each of their nodes contain a single digit. Add the two numbers and return it as a linked list.</p><p>You may assume the two numbers do not contain any leading zero, except the number 0 itself.</p><p><strong>Example:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: (2 -&gt; 4 -&gt; 3) + (5 -&gt; 6 -&gt; 4)</span><br><span class="line">Output: 7 -&gt; 0 -&gt; 8</span><br><span class="line">Explanation: 342 + 465 = 807.</span><br></pre></td></tr></table></figure></p><p>Solution 1:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//Input Validation</span></span><br><span class="line">        <span class="keyword">if</span> (l1 == <span class="keyword">null</span> &amp;&amp; l2 == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (isNotValidListNode(l1)) &#123;</span><br><span class="line">            <span class="keyword">return</span> l2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (isNotValidListNode(l2)) &#123;</span><br><span class="line">            <span class="keyword">return</span> l1;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Create dummyListNode head to record the head node address.</span></span><br><span class="line">        ListNode dummyListNode = <span class="keyword">new</span> ListNode(<span class="number">1</span>);</span><br><span class="line">        ListNode currentNode = dummyListNode;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> carry = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (l1 != <span class="keyword">null</span> &amp;&amp; l2 != <span class="keyword">null</span>)&#123;</span><br><span class="line">            sum = l1.val + l2.val + carry;</span><br><span class="line">            currentNode.next = <span class="keyword">new</span> ListNode(sum % <span class="number">10</span>);</span><br><span class="line">            carry = sum &gt;= <span class="number">10</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">            l1 = l1.next;</span><br><span class="line">            l2 = l2.next;</span><br><span class="line">            currentNode = currentNode.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (l1 != <span class="keyword">null</span>)&#123;</span><br><span class="line">            sum = l1.val + carry;</span><br><span class="line">            currentNode.next = <span class="keyword">new</span> ListNode(sum % <span class="number">10</span>);</span><br><span class="line">            carry = sum &gt;= <span class="number">10</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">            l1 = l1.next;</span><br><span class="line">            currentNode = currentNode.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (l2 != <span class="keyword">null</span>)&#123;</span><br><span class="line">            sum = l2.val + carry;</span><br><span class="line">            currentNode.next = <span class="keyword">new</span> ListNode(sum % <span class="number">10</span>);</span><br><span class="line">            carry = sum &gt;= <span class="number">10</span> ? <span class="number">1</span> : <span class="number">0</span>;</span><br><span class="line">            l2 = l2.next;</span><br><span class="line">            currentNode = currentNode.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (carry != <span class="number">0</span>) &#123;</span><br><span class="line">            currentNode.next = <span class="keyword">new</span> ListNode(<span class="number">1</span>);</span><br><span class="line">            currentNode = currentNode.next;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummyListNode.next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isNotValidListNode</span><span class="params">(ListNode node)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> node == <span class="keyword">null</span> || (node.val == <span class="number">0</span> &amp;&amp; node.next == <span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Performance: 28ms</p><p>Solution 2:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ListNode <span class="title">addTwoNumbers</span><span class="params">(ListNode l1, ListNode l2)</span> </span>&#123;</span><br><span class="line">        ListNode dummy = <span class="keyword">new</span> ListNode(<span class="number">0</span>);</span><br><span class="line">        ListNode t1 = l1, t2 = l2;</span><br><span class="line">        ListNode cur = dummy;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (t1 != <span class="keyword">null</span> || t2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (t1 != <span class="keyword">null</span>) &#123;</span><br><span class="line">                sum += t1.val;</span><br><span class="line">                t1 = t1.next;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (t2 != <span class="keyword">null</span>) &#123;</span><br><span class="line">                sum += t2.val;</span><br><span class="line">                t2 = t2.next;</span><br><span class="line">            &#125;</span><br><span class="line">            cur.next = <span class="keyword">new</span> ListNode(sum % <span class="number">10</span>);</span><br><span class="line">            cur = cur.next;</span><br><span class="line">            sum /= <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (sum == <span class="number">1</span>) &#123;</span><br><span class="line">            cur.next = <span class="keyword">new</span> ListNode(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Performance: 34ms</p><h2 id="3-Longest-Substring-Without-Repeating-Characters"><a href="#3-Longest-Substring-Without-Repeating-Characters" class="headerlink" title="3. Longest Substring Without Repeating Characters"></a>3. Longest Substring Without Repeating Characters</h2><p>🍋🍋🍋</p><p>Given a string, find the length of the <strong>longest substring</strong> without repeating characters.</p><p><strong>Example 1:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;abcabcbb&quot;</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: The answer is &quot;abc&quot;, which the length is 3.</span><br></pre></td></tr></table></figure></p><p><strong>Example 2:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;bbbbb&quot;</span><br><span class="line">Output: 1</span><br><span class="line">Explanation: The answer is &quot;b&quot;, with the length of 1.</span><br></pre></td></tr></table></figure></p><p><strong>Example 3:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Input: &quot;pwwkew&quot;</span><br><span class="line">Output: 3</span><br><span class="line">Explanation: The answer is &quot;wke&quot;, with the length of 3.</span><br><span class="line">             Note that the answer must be a substring, &quot;pwke&quot; is a subsequence and not a substring.</span><br></pre></td></tr></table></figure></p><p>Solution 1:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (s == <span class="keyword">null</span> || s.length() ==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> length = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.length(); i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt;= s.length(); j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((j - i &gt; length) &amp;&amp; isValidString(s.substring(i, j))) &#123;</span><br><span class="line">                    length = j - i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> length;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isValidString</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">char</span>[] charArray = s.toCharArray();</span><br><span class="line">        HashSet&lt;Character&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; charArray.length; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (set.contains(charArray[i]))&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            set.add(charArray[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Performance: Time Limit Exceeded</p><p>Solution 2:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n = s.length(), ans = <span class="number">0</span>;</span><br><span class="line">    Map&lt;Character, Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(); <span class="comment">// current index of character</span></span><br><span class="line">    <span class="comment">// try to extend the range [i, j]</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>, i = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(s.charAt(j))) &#123;</span><br><span class="line">            i = Math.max(map.get(s.charAt(j)), i);</span><br><span class="line">        &#125;</span><br><span class="line">        ans = Math.max(ans, j - i + <span class="number">1</span>);</span><br><span class="line">        map.put(s.charAt(j), j + <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Performance: 66ms</p><h2 id="4-Median-of-Two-Sorted-Arrays"><a href="#4-Median-of-Two-Sorted-Arrays" class="headerlink" title="4. Median of Two Sorted Arrays"></a>4. Median of Two Sorted Arrays</h2><p>🌶🌶🌶</p><p>There are two sorted arrays <strong>nums1</strong> and <strong>nums2</strong> of size m and n respectively.</p><p>Find the median of the two sorted arrays. The overall run time complexity should be O(log (m+n)).</p><p>You may assume <strong>nums1</strong> and <strong>nums2</strong> cannot be both empty.</p><p><strong>Example 1:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nums1 = [1, 3]</span><br><span class="line">nums2 = [2]</span><br><span class="line"></span><br><span class="line">The median is 2.0</span><br></pre></td></tr></table></figure></p><p><strong>Example 2:</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nums1 = [1, 2]</span><br><span class="line">nums2 = [3, 4]</span><br><span class="line"></span><br><span class="line">The median is (2 + 3)/2 = 2.5</span><br></pre></td></tr></table></figure></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">findMedianSortedArrays</span><span class="params">(<span class="keyword">int</span>[] A, <span class="keyword">int</span>[] B)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> m = A.length;</span><br><span class="line">        <span class="keyword">int</span> n = B.length;</span><br><span class="line">        <span class="keyword">if</span> (m &gt; n) &#123; <span class="comment">// to ensure m&lt;=n</span></span><br><span class="line">            <span class="keyword">int</span>[] temp = A; A = B; B = temp;</span><br><span class="line">            <span class="keyword">int</span> tmp = m; m = n; n = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> iMin = <span class="number">0</span>, iMax = m, halfLen = (m + n + <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">while</span> (iMin &lt;= iMax) &#123;</span><br><span class="line">            <span class="keyword">int</span> i = (iMin + iMax) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">int</span> j = halfLen - i;</span><br><span class="line">            <span class="keyword">if</span> (i &lt; iMax &amp;&amp; B[j-<span class="number">1</span>] &gt; A[i])&#123;</span><br><span class="line">                iMin = i + <span class="number">1</span>; <span class="comment">// i is too small</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (i &gt; iMin &amp;&amp; A[i-<span class="number">1</span>] &gt; B[j]) &#123;</span><br><span class="line">                iMax = i - <span class="number">1</span>; <span class="comment">// i is too big</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> &#123; <span class="comment">// i is perfect</span></span><br><span class="line">                <span class="keyword">int</span> maxLeft = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span> (i == <span class="number">0</span>) &#123; maxLeft = B[j-<span class="number">1</span>]; &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (j == <span class="number">0</span>) &#123; maxLeft = A[i-<span class="number">1</span>]; &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123; maxLeft = Math.max(A[i-<span class="number">1</span>], B[j-<span class="number">1</span>]); &#125;</span><br><span class="line">                <span class="keyword">if</span> ( (m + n) % <span class="number">2</span> == <span class="number">1</span> ) &#123; <span class="keyword">return</span> maxLeft; &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">int</span> minRight = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">if</span> (i == m) &#123; minRight = B[j]; &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (j == n) &#123; minRight = A[i]; &#125;</span><br><span class="line">                <span class="keyword">else</span> &#123; minRight = Math.min(B[j], A[i]); &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> (maxLeft + minRight) / <span class="number">2.0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Leetcode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Algorithms </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Homebrew Instruction</title>
      <link href="/2018/09/09/CLI/Homebrew/Homebrew-instruction/"/>
      <url>/2018/09/09/CLI/Homebrew/Homebrew-instruction/</url>
      <content type="html"><![CDATA[<h2 id="Homebrew-Cask"><a href="#Homebrew-Cask" class="headerlink" title="Homebrew Cask"></a>Homebrew Cask</h2><blockquote><p>Reference from <a href="https://github.com/Homebrew/homebrew-cask" target="_blank" rel="noopener">Homebrew Cask Repository</a></p></blockquote><p>Homebrew Cask extends <a href="https://brew.sh/" target="_blank" rel="noopener">Homebrew</a> and brings its elegance, simplicity, and speed to the installation and management of GUI macOS applications such as Atom and Google Chrome.</p><p>Install Java8 shows as below(results may various based on your env property):<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">~ brew cask install java8</span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Auto-updated Homebrew!</span><br><span class="line">Updated 1 tap (homebrew/core).</span><br><span class="line">==&gt; New Formulae</span><br><span class="line">ucloud</span><br><span class="line"></span><br><span class="line">==&gt; Caveats</span><br><span class="line">This Cask makes minor modifications to the JRE to prevent issues with</span><br><span class="line">packaged applications, as discussed here:</span><br><span class="line"></span><br><span class="line">  https://bugs.eclipse.org/bugs/show_bug.cgi?id=411361</span><br><span class="line"></span><br><span class="line">If your Java application still asks <span class="keyword">for</span> JRE installation, you might need</span><br><span class="line">to reboot or <span class="built_in">logout</span>/login.</span><br><span class="line"></span><br><span class="line">Installing java8 means you have AGREED to the license at</span><br><span class="line">  https://www.oracle.com/technetwork/java/javase/terms/license/index.html</span><br><span class="line"></span><br><span class="line">==&gt; Satisfying dependencies</span><br><span class="line">==&gt; Downloading http://download.oracle.com/otn-pub/java/jdk/8u181-b13/96a7b8442fe848ef90c96a2fad6ed6d1/jdk-8u181-macosx-x64.dmg</span><br><span class="line">==&gt; Downloading from http://download.oracle.com/otn-pub/java/jdk/8u181-b13/96a7b8442fe848ef90c96a2fad6ed6d1/jdk-8u181-macosx-x64.dmg?AuthParam=1536521262_1d36fcda798e0621f68c643d30d3f258</span><br><span class="line"><span class="comment">######################################################################## 100.0%</span></span><br><span class="line">==&gt; Verifying checksum <span class="keyword">for</span> Cask java8</span><br><span class="line">==&gt; Installing Cask java8</span><br><span class="line">==&gt; Creating Caskroom at /usr/<span class="built_in">local</span>/Caskroom</span><br><span class="line">==&gt; We<span class="string">'ll set permissions properly so we won'</span>t need sudo <span class="keyword">in</span> the future.</span><br><span class="line">Password:</span><br><span class="line">==&gt; Running installer <span class="keyword">for</span> java8; your password may be necessary.</span><br><span class="line">==&gt; Package installers may write to any location; options such as --appdir are ignored.</span><br><span class="line">installer: Package name is JDK 8 Update 181</span><br><span class="line">installer: Installing at base path /</span><br><span class="line">installer: The install was successful.</span><br><span class="line">🍺  java8 was successfully installed!</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> CLI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Homebrew </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Java FAQ</title>
      <link href="/2018/09/09/Java/Java-FAQ/"/>
      <url>/2018/09/09/Java/Java-FAQ/</url>
      <content type="html"><![CDATA[<h2 id="Why-would-the-‘final’-keyword-ever-be-useful"><a href="#Why-would-the-‘final’-keyword-ever-be-useful" class="headerlink" title="Why would the ‘final’ keyword ever be useful?"></a>Why would the ‘final’ keyword ever be useful?</h2><p><code>final</code> <strong>expresses intent</strong>. It tells the user of a class, method or variable “This element is not supposed to change, and if you want to change it, you haven’t understood the existing design.”</p><p>This is important because program architecture would be really, really hard if you had to anticipate that every class and every method you ever write might be changed to do something completely different by a subclass. It is much better to decide up-front which elements are supposed to be changeable and which aren’t, and to enforce the unchangeablility via final.</p><p>You could also do this via comments and architecture documents, but it is always better to let the compiler enforce things that it can than to hope that future users will read and obey the documentation.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Final variables --&gt; To create constant variables</span><br><span class="line">Final Methods --&gt; Prevent Method Overriding</span><br><span class="line">Final Classes --&gt; Prevent Inheritance</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>How to install Java 8 with Home Brew</title>
      <link href="/2018/09/09/Java/How-to-install-Java-8-with-homebrew/"/>
      <url>/2018/09/09/Java/How-to-install-Java-8-with-homebrew/</url>
      <content type="html"><![CDATA[<blockquote><p>Reference from <a href="https://stackoverflow.com/questions/24342886/how-to-install-java-8-on-mac" target="_blank" rel="noopener">How to install Java 8 with homwbrew</a></p></blockquote><p><strong>Don’t rely on</strong> Oracle to install Java properly on your Mac.</p><p>Use <code>Homebrew</code>. this will install the latest jdk:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask install java</span><br></pre></td></tr></table></figure><p>If you want to manage multiple versions of Java on your Mac, consider using <code>jenv</code>.</p><p>UPDATE: Now that Java 8 is no longer the most current version, if you want java 8 install it this way:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew tap caskroom/versions</span><br><span class="line">brew cask install java8</span><br></pre></td></tr></table></figure><p>To get a list of all older versions of java:  <code>brew tap caskroom/versions</code> and then <code>brew cask search java</code></p><p>We use brew cask since we’d otherwise use the Oracle GUI installer that will likely not install Java properly on your Mac. (Use brew cask install APP to install GUI apps; use brew install APP.) Java is not a GUI app; It should not require “cask” but at least Oracle is consistent.</p>]]></content>
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java 8 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Guide to the Most Important JVM Parameters</title>
      <link href="/2018/09/09/Java/Most-Important-JVM-Parameters/"/>
      <url>/2018/09/09/Java/Most-Important-JVM-Parameters/</url>
      <content type="html"><![CDATA[<blockquote><p>Reference from <a href="https://www.baeldung.com/jvm-parameters" target="_blank" rel="noopener">Guide to the Most Important JVM Parameters</a></p></blockquote><h2 id="1-Overview"><a href="#1-Overview" class="headerlink" title="1. Overview"></a>1. Overview</h2><p>In this quick tutorial, we’ll explore the most well-known options which can be used to configure the Java Virtual Machine.</p><h2 id="2-Explicit-Heap-Memory"><a href="#2-Explicit-Heap-Memory" class="headerlink" title="2. Explicit Heap Memory"></a>2. Explicit Heap Memory</h2><p>One of the most common performance-related practices is to initialize the heap memory as per the application requirements.<br>That’s why we should specify minimal and maximal heap size. Below parameters can be used for achieving it:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-Xms&lt;heap size&gt;[unit]</span><br><span class="line">-Xmx&lt;heap size&gt;[unit]</span><br></pre></td></tr></table></figure></p><p>Here, unit denotes the unit in which the memory (indicated by heap size) is to be initialized. Units can be marked as <strong>‘g’</strong> for <strong>GB</strong>, <strong>‘m’</strong> for <strong>MB</strong> and <strong>‘k’</strong> for <strong>KB</strong>.<br>For example, if we want to assign minimum 2 GB and maximum 5 GB to JVM, we need to write:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Xms2G -Xmx5G</span><br></pre></td></tr></table></figure></p><p>Starting with Java 8, the size of Metaspace is not defined. Once it reaches the global limit, JVM automatically increases it, However, to overcome any unnecessary instability, we can set Metaspace size with:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:MaxMetaspaceSize=&lt;metaspace size&gt;[unit]</span><br></pre></td></tr></table></figure></p><p>Here, metaspace size denotes the amount of memory we want to assign to Metaspace.<br>As per Oracle guidelines, after total available memory, the second most influential factor is the proportion of the heap reserved for the Young Generation. By default, the minimum size of the YG is 1310 MB, and maximum size is unlimited.<br>We can assign them explicitly:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-XX:NewSize=&lt;young size&gt;[unit]</span><br><span class="line">-XX:MaxNewSize=&lt;young size&gt;[unit]</span><br></pre></td></tr></table></figure></p><h2 id="3-Garbage-Collection"><a href="#3-Garbage-Collection" class="headerlink" title="3. Garbage Collection"></a>3. Garbage Collection</h2><p>For better stability of the application, choosing of right <a href="https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html" target="_blank" rel="noopener">Garbage Collection</a> algorithm is critical.</p><p>JVM has four types of GC implementations:</p><ul><li>Serial Garbage Collector</li><li>Parallel Garbage Collector</li><li>CMS Garbage Collector</li><li>G1 Garbage Collector<br>These implementations can be declared with the below parameters:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-XX:+UseSerialGC</span><br><span class="line">-XX:+UseParallelGC</span><br><span class="line">-XX:+USeParNewGC</span><br><span class="line">-XX:+UseG1GC</span><br></pre></td></tr></table></figure></li></ul><p>More details on Garbage Collection implementations can be found <a href="https://www.baeldung.com/jvm-garbage-collectors" target="_blank" rel="noopener">here</a>.</p><h2 id="4-GC-Logging"><a href="#4-GC-Logging" class="headerlink" title="4. GC Logging"></a>4. GC Logging</h2><p>To strictly monitor the application health, we should always check the JVM’s Garbage Collection performance. The easiest way to do this is to log the GC activity in human readable format.<br>Using the following parameters, we can log the GC activity:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-XX:+UseGCLogFileRotation</span><br><span class="line">-XX:NumberOfGCLogFiles=&lt; number of log files &gt;</span><br><span class="line">-XX:GCLogFileSize=&lt; file size &gt;[ unit ]</span><br><span class="line">-Xloggc:/path/to/gc.log</span><br></pre></td></tr></table></figure></p><p><strong>UseGCLogFileRotation</strong> specifies the log file rolling policy, much like log4j, s4lj, etc. <strong>NumberOfGCLogFiles</strong> denotes the max number of log files that can be written for a single application life cycle. <strong>GCLogFileSize</strong> specifies the max size of the file. Finally, <strong>loggc</strong> denotes its location.<br>Point to note here is that, there are two more JVM parameters available (<strong>-XX:+PrintGCTimeStamps</strong> and <strong>-XX:+PrintGCDateStamps</strong>) which can be used to print date-wise timestamp in the GC log.<br>For example, if we want to assign a maximum of 100 GC log files, each having a maximum size of 50 MB and want to store them in ‘/home/user/log/’ location, we can use below syntax:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-XX:+UseGCLogFileRotation  </span><br><span class="line">-XX:NumberOfGCLogFiles=10</span><br><span class="line">-XX:GCLogFileSize=50M</span><br><span class="line">-Xloggc:/home/user/log/gc.log</span><br></pre></td></tr></table></figure></p><p>However, the problem is that one additional daemon thread is always used for monitoring system time in the background. This behavior may create some performance bottleneck; that’s why it’s always better not to play with this parameter in production.</p><h2 id="5-Handling-Out-of-Memory"><a href="#5-Handling-Out-of-Memory" class="headerlink" title="5. Handling Out of Memory"></a>5. Handling Out of Memory</h2><p>It’s very common for a large application to face out of memory error which, in turn, results in the application crash. It’s a very critical scenario and very hard to replicate to troubleshoot the issue.<br>That’s why JVM comes with some parameters which dump heap memory into a physical file which can be used later for finding out leaks:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-XX:+HeapDumpOnOutOfMemoryError</span><br><span class="line">-XX:HeapDumpPath=./java_pid&lt;pid&gt;.hprof</span><br><span class="line">-XX:OnOutOfMemoryError=&quot;&lt; cmd args &gt;;&lt; cmd args &gt;&quot;</span><br><span class="line">-XX:+UseGCOverheadLimit</span><br></pre></td></tr></table></figure></p><p>A couple of points to note here:</p><ul><li><strong>HeapDumpOnOutOfMemoryError</strong> instructs the JVM to dump heap into physical file in case of OutOfMemoryError</li><li><strong>HeapDumpPath</strong> denotes the path where the file is to be written; any filename can be given; however, if JVM finds a <pid> tag in the name, the process id of the current process causing the out of memory error will be appended to the file name with .hprof format</pid></li><li><p><strong>OnOutOfMemoryError</strong> is used to issue emergency commands to be executed in case of out of memory error; proper command should be used in the space of cmd args. For example, if we want to restart the server as soon as out of memory occur, we can set the parameter:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:OnOutOfMemoryError=&quot;shutdown -r&quot;</span><br></pre></td></tr></table></figure></li><li><p><strong>UseGCOverheadLimit</strong> is a policy that limits the proportion of the VM’s time that is spent in GC before an OutOfMemory error is thrown</p></li></ul><h2 id="6-32-64-bit"><a href="#6-32-64-bit" class="headerlink" title="6. 32/64 bit"></a>6. 32/64 bit</h2><p>In the OS environment where both 32 and 64-bit packages are installed, the JVM automatically chooses 32-bit environmental packages.<br>If we want to set the environment to 64 bit manually, we can do so using below parameter:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-d&lt;OS bit&gt;</span><br></pre></td></tr></table></figure></p><p>OS bit can be either 32 or 64. More information about this can be found <a href="https://www.oracle.com/technetwork/java/hotspotfaq-138619.html#64bit_layering" target="_blank" rel="noopener">here</a>.</p><h2 id="7-Misc"><a href="#7-Misc" class="headerlink" title="7. Misc"></a>7. Misc</h2><ul><li>-server: enables “Server Hotspot VM”; this parameter is used by default in 64 bit JVM</li><li>-XX:+UseStringDeduplication: Java 8u20 has introduced this JVM parameter for reducing the unnecessary use of memory by creating too many instances of the same String; this optimizes the heap memory by reducing duplicate String values to a single global char[] array</li><li>-XX:+UseLWPSynchronization: sets LWP (Light Weight Process) – based synchronization policy instead of thread-based synchronization</li><li>-XX:LargePageSizeInBytes: sets the large page size used for the Java heap; it takes the argument in GB/MB/KB; with larger page sizes we can make better use of virtual memory hardware resources; however, this may cause larger space sizes for the PermGen, which in turn can force to reduce the size of Java heap space</li><li>-XX:MaxHeapFreeRatio: sets the maximum percentage of heap free after GC to avoid shrinking.</li><li>-XX:MinHeapFreeRatio: sets the minimum percentage of heap free after GC to avoid expansion; to monitor the heap usage you can use VisualVM shipped with JDK.</li><li>-XX:SurvivorRatio: Ratio of eden/survivor space size – for example, -XX:SurvivorRatio=6 sets the ratio between each survivor space and eden space to be 1:6,</li><li>-XX:+UseLargePages: use large page memory if it is supported by the system; please note that OpenJDK 7 tends to crash if using this JVM parameter</li><li>-XX:+UseStringCache: enables caching of commonly allocated strings available in the String pool</li><li>-XX:+UseCompressedStrings: use a byte[] type for String objects which can be represented in pure ASCII format</li><li>-XX:+OptimizeStringConcat: it optimizes String concatenation operations where possible</li></ul><h2 id="8-Conclusion"><a href="#8-Conclusion" class="headerlink" title="8. Conclusion"></a>8. Conclusion</h2><p>In this quick article, we learned about some important JVM parameters – which can be used to tune and improve general application performance.<br>Some of these can also be used for debugging purposes.<br>If you want to explore the reference parameters in more detail, you can get started <a href="http://www.oracle.com/technetwork/articles/java/vmoptions-jsp-140102.html" target="_blank" rel="noopener">here</a>.</p>]]></content>
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Java 8 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Edit Application</title>
      <link href="/2018/08/23/Angular/Angular-4-Edit-Application/"/>
      <url>/2018/08/23/Angular/Angular-4-Edit-Application/</url>
      <content type="html"><![CDATA[<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>These are all the folders and files the Angular CLI created for you. This is your entire Angular project.<br><img src="https://i.imgur.com/PrizTaL.png" alt="Angular Project Overview"></p><h2 id="Project-dependencies"><a href="#Project-dependencies" class="headerlink" title="Project dependencies"></a>Project dependencies</h2><p>One of the most important files is Package.json which is your dependency configuration file.<br>Here you can see all the dependencies of your project like Angular 6 and these are third-party packages your project needs to run correctly.<br>All devDependencies are only required for development.<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"my-app"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"0.0.0"</span>,</span><br><span class="line">  <span class="attr">"scripts"</span>: &#123;</span><br><span class="line">    <span class="attr">"ng"</span>: <span class="string">"ng"</span>,</span><br><span class="line">    <span class="attr">"start"</span>: <span class="string">"ng serve"</span>,</span><br><span class="line">    <span class="attr">"build"</span>: <span class="string">"ng build"</span>,</span><br><span class="line">    <span class="attr">"test"</span>: <span class="string">"ng test"</span>,</span><br><span class="line">    <span class="attr">"lint"</span>: <span class="string">"ng lint"</span>,</span><br><span class="line">    <span class="attr">"e2e"</span>: <span class="string">"ng e2e"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"private"</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"@angular/animations"</span>: <span class="string">"^6.1.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/common"</span>: <span class="string">"^6.1.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/compiler"</span>: <span class="string">"^6.1.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/core"</span>: <span class="string">"^6.1.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/forms"</span>: <span class="string">"^6.1.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/http"</span>: <span class="string">"^6.1.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/platform-browser"</span>: <span class="string">"^6.1.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/platform-browser-dynamic"</span>: <span class="string">"^6.1.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/router"</span>: <span class="string">"^6.1.0"</span>,</span><br><span class="line">    <span class="attr">"core-js"</span>: <span class="string">"^2.5.4"</span>,</span><br><span class="line">    <span class="attr">"rxjs"</span>: <span class="string">"^6.0.0"</span>,</span><br><span class="line">    <span class="attr">"zone.js"</span>: <span class="string">"~0.8.26"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"devDependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"@angular-devkit/build-angular"</span>: <span class="string">"~0.7.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/cli"</span>: <span class="string">"~6.1.5"</span>,</span><br><span class="line">    <span class="attr">"@angular/compiler-cli"</span>: <span class="string">"^6.1.0"</span>,</span><br><span class="line">    <span class="attr">"@angular/language-service"</span>: <span class="string">"^6.1.0"</span>,</span><br><span class="line">    <span class="attr">"@types/jasmine"</span>: <span class="string">"~2.8.6"</span>,</span><br><span class="line">    <span class="attr">"@types/jasminewd2"</span>: <span class="string">"~2.0.3"</span>,</span><br><span class="line">    <span class="attr">"@types/node"</span>: <span class="string">"~8.9.4"</span>,</span><br><span class="line">    <span class="attr">"codelyzer"</span>: <span class="string">"~4.2.1"</span>,</span><br><span class="line">    <span class="attr">"jasmine-core"</span>: <span class="string">"~2.99.1"</span>,</span><br><span class="line">    <span class="attr">"jasmine-spec-reporter"</span>: <span class="string">"~4.2.1"</span>,</span><br><span class="line">    <span class="attr">"karma"</span>: <span class="string">"~1.7.1"</span>,</span><br><span class="line">    <span class="attr">"karma-chrome-launcher"</span>: <span class="string">"~2.2.0"</span>,</span><br><span class="line">    <span class="attr">"karma-coverage-istanbul-reporter"</span>: <span class="string">"~2.0.0"</span>,</span><br><span class="line">    <span class="attr">"karma-jasmine"</span>: <span class="string">"~1.1.1"</span>,</span><br><span class="line">    <span class="attr">"karma-jasmine-html-reporter"</span>: <span class="string">"^0.2.2"</span>,</span><br><span class="line">    <span class="attr">"protractor"</span>: <span class="string">"~5.4.0"</span>,</span><br><span class="line">    <span class="attr">"ts-node"</span>: <span class="string">"~5.0.1"</span>,</span><br><span class="line">    <span class="attr">"tslint"</span>: <span class="string">"~5.9.1"</span>,</span><br><span class="line">    <span class="attr">"typescript"</span>: <span class="string">"~2.7.2"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="Index-page"><a href="#Index-page" class="headerlink" title="Index page"></a>Index page</h2><p>The Index page described in <code>app.component.html</code> of <code>$Root/src/app</code>.（Actually, Index page defined in <code>index.html</code> of <code>$Root</code> directory, and <code>app.component.html</code> inject by <code>app.component.ts</code> with <code>app-root</code> tag which will talk in the future）<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--The content below is only a placeholder and can be replaced.--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">    Welcome to &#123;&#123; title &#125;&#125;!</span><br><span class="line">  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">width</span>=<span class="string">"300"</span> <span class="attr">alt</span>=<span class="string">"Angular Logo"</span> <span class="attr">src</span>=<span class="string">"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg=="</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>Here are some links to help you start: <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">rel</span>=<span class="string">"noopener"</span> <span class="attr">href</span>=<span class="string">"https://angular.io/tutorial"</span>&gt;</span>Tour of Heroes<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">rel</span>=<span class="string">"noopener"</span> <span class="attr">href</span>=<span class="string">"https://github.com/angular/angular-cli/wiki"</span>&gt;</span>CLI Documentation<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">target</span>=<span class="string">"_blank"</span> <span class="attr">rel</span>=<span class="string">"noopener"</span> <span class="attr">href</span>=<span class="string">"https://blog.angular.io/"</span>&gt;</span>Angular blog<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>And the Index page shows as below:<br><img src="https://i.imgur.com/o2lq8YP.png" alt="Angular Index"></p><p>Modify this block:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">  Welcome to &#123;&#123; title &#125;&#125;!</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>to<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">  This is my first App!</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>Then Index page content changed to:<br><img src="https://i.imgur.com/TGyW50v.png" alt="Angular Index Modified"></p><p>You may see a special code in previous block as <code>Edit Application</code>, this is dynamic combination with the value in <code>TypeScript</code> files. Angular allows us to mix static HTML code and dynamic things we want to output in that code.</p><p>The <code>title</code> defined in <code>app.component.ts</code> file as:<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">'app-root'</span>,</span><br><span class="line">  templateUrl: <span class="string">'./app.component.html'</span>,</span><br><span class="line">  styleUrls: [<span class="string">'./app.component.css'</span>]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AppComponent &#123;</span><br><span class="line">  title = <span class="string">'my-app'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Now, let us change the title value from <code>my-app</code> to <code>First Application</code> and insert another variable <code>user</code> as below:<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AppComponent &#123;</span><br><span class="line">  title = <span class="string">'First Application'</span>;</span><br><span class="line">  user = <span class="string">'Vince'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>And update the html block as<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">  &#123;&#123; user &#125;&#125;'s &#123;&#123; title &#125;&#125;!</span><br><span class="line"><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>The index page presents like:<br><img src="https://i.imgur.com/izunj86.png" alt="Angular Index with user"></p><h2 id="Data-binding"><a href="#Data-binding" class="headerlink" title="Data binding"></a>Data binding</h2><p>We use curly braces for data binding - like <code>Edit Application</code>; this process is called interpolation. We have already seen in our previous examples how we declared the value to the variable title and the same is printed in the browser.<br>The variable in the <code>app.component.html</code> file is referred as <code>Edit Application</code> and the value of title is initialized in the <code>app.component.ts</code> file and in <code>app.component.html</code>, the value is displayed.</p><p>With data binding feature, we could build more fancy webs by update the <code>app.module.ts</code> as:<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; BrowserModule &#125; <span class="keyword">from</span> <span class="string">'@angular/platform-browser'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; NgModule &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; FormsModule &#125; <span class="keyword">from</span> <span class="string">'@angular/forms'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; AppComponent &#125; <span class="keyword">from</span> <span class="string">'./app.component'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">  declarations: [</span><br><span class="line">    AppComponent</span><br><span class="line">  ],</span><br><span class="line">  imports: [</span><br><span class="line">    BrowserModule,</span><br><span class="line">    FormsModule</span><br><span class="line">  ],</span><br><span class="line">  providers: [],</span><br><span class="line">  bootstrap: [AppComponent]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AppModule &#123; &#125;</span><br></pre></td></tr></table></figure></p><p>Update <code>app.component.html</code> as:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span></span><br><span class="line">    &#123;&#123; user &#125;&#125;'s &#123;&#123; title &#125;&#125;!</span><br><span class="line">  <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span> User <span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">"text"</span> [(<span class="attr">ngModel</span>)] = <span class="string">"user"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span> Title <span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">"text"</span> [(<span class="attr">ngModel</span>)] = <span class="string">"title"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>Then the index page changed to:<br><img src="https://i.imgur.com/R9VGzPK.png" alt="Angular Data Binding"></p><p>The content will sync with input simultaneously.</p>]]></content>
      
      <categories>
          
          <category> Front-end </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Angular </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>First Application</title>
      <link href="/2018/08/23/Angular/Angular-3-First-Application/"/>
      <url>/2018/08/23/Angular/Angular-3-First-Application/</url>
      <content type="html"><![CDATA[<blockquote><p>Reference from <a href="https://angular.io/guide/quickstart" target="_blank" rel="noopener">Angular Quick Start</a></p></blockquote><h2 id="Angular-CLI"><a href="#Angular-CLI" class="headerlink" title="Angular CLI"></a>Angular CLI</h2><h3 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h3><p>he Angular CLI is a tool to initialize, develop, scaffold and maintain <a href="https://angular.io/" target="_blank" rel="noopener">Angular</a> applications.</p><h3 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h3><p>To install the Angular CLI:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @angular/cli</span><br></pre></td></tr></table></figure></p><p>Generating and serving an Angular project via a development server Create and run a new project:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ng new my-project</span><br><span class="line"><span class="built_in">cd</span> my-project</span><br><span class="line">ng serve</span><br></pre></td></tr></table></figure></p><p>Navigate to <a href="http://localhost:4200/" target="_blank" rel="noopener">http://localhost:4200/</a>. The app will automatically reload if you change any of the source files.</p><h3 id="Bundling"><a href="#Bundling" class="headerlink" title="Bundling"></a>Bundling</h3><p>All builds make use of bundling, and using the <code>--prod</code> flag in <code>ng</code> build <code>--prod</code> or <code>ng serve --prod</code> will also make use of uglifying and tree-shaking functionality.</p><h3 id="Running-unit-tests"><a href="#Running-unit-tests" class="headerlink" title="Running unit tests"></a>Running unit tests</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng <span class="built_in">test</span></span><br></pre></td></tr></table></figure><p>Tests will execute after a build is executed via <a href="http://karma-runner.github.io/0.13/index.html" target="_blank" rel="noopener">Karma</a>, and it will automatically watch your files for changes. You can run tests a single time via <code>--watch=false</code> or <code>--single-run</code>.</p><h3 id="Running-end-to-end-tests"><a href="#Running-end-to-end-tests" class="headerlink" title="Running end-to-end tests"></a>Running end-to-end tests</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng e2e</span><br></pre></td></tr></table></figure><p>Before running the tests make sure you are serving the app via ng serve. End-to-end tests are run via <a href="http://www.protractortest.org/#/" target="_blank" rel="noopener">Protractor</a>.</p><h2 id="Create-First-app"><a href="#Create-First-app" class="headerlink" title="Create First app"></a>Create First app</h2><p>You need to install <a href="https://nodejs.org/en/" target="_blank" rel="noopener">NodeJS</a> first, then you could run the command as below:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @angular/cli</span><br><span class="line">mkdir Angular</span><br><span class="line"><span class="built_in">cd</span> Angular</span><br><span class="line">ng new my-app</span><br><span class="line"><span class="built_in">cd</span> my-app</span><br><span class="line">ng serve --open</span><br></pre></td></tr></table></figure></p><p>Then you are good to go! Hope you enjoy the Angular World.</p>]]></content>
      
      <categories>
          
          <category> Front-end </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Angular </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Angular Versions</title>
      <link href="/2018/08/23/Angular/Angular-2-Angular-Versions/"/>
      <url>/2018/08/23/Angular/Angular-2-Angular-Versions/</url>
      <content type="html"><![CDATA[<h2 id="Angular-1"><a href="#Angular-1" class="headerlink" title="Angular 1"></a>Angular 1</h2><p>Angular 1 was the first Angular framework to really make single page applications and this better way of manipulating the DOM popular back in the times</p><h2 id="Angular-2"><a href="#Angular-2" class="headerlink" title="Angular 2"></a>Angular 2</h2><p>Angular 2, back at the time in 2015-2016 was a complete rewrite of Angular 1 which fix many of the problems Angular 1 had though; mostly performance issue.</p><h2 id="Angular-3"><a href="#Angular-3" class="headerlink" title="Angular 3"></a>Angular 3</h2><p>There is no Angular 3 released and Google decided to move to Angular 4 directly.</p><h2 id="Angular-4-5-6"><a href="#Angular-4-5-6" class="headerlink" title="Angular 4,5,6"></a>Angular 4,5,6</h2><p>Angular 4, 5 and 6 really are just the latest versions or more recent versions of Angular 2.</p><h2 id="Angular"><a href="#Angular" class="headerlink" title="Angular"></a>Angular</h2><p>In general, we refer to Angular 2 or higher as just Angular.</p><h2 id="AngularJS"><a href="#AngularJS" class="headerlink" title="AngularJS"></a>AngularJS</h2><p>Refer to Angular 1 to differentiate with Angular 2+, which is Angular mentioned above.</p><h2 id="Angular-6-VS-Angular-2"><a href="#Angular-6-VS-Angular-2" class="headerlink" title="Angular 6 VS Angular 2"></a>Angular 6 VS Angular 2</h2><p>Angular 6 is the latest version and it is not a complete rewrite for every new version. Instead we just have incremental small improvements and indeed the code you’ll learn for Angular 2 is pretty-much the same for Angular 6.</p>]]></content>
      
      <categories>
          
          <category> Front-end </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Angular </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>What is Angular</title>
      <link href="/2018/08/23/Angular/Angular-1-What-is-Angular/"/>
      <url>/2018/08/23/Angular/Angular-1-What-is-Angular/</url>
      <content type="html"><![CDATA[<h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>Angular is a JavaScript Framework which allows you to create reactive Single-Page-Application (SPAs)</p><h2 id="How-is-it-done"><a href="#How-is-it-done" class="headerlink" title="How is it done?"></a>How is it done?</h2><p>JavaScript changes the DOM, changes whatever is displayed here (in the browser), by changing the HTML code during runtime. That is why you never see the refresh icon on the top-left spin; because we’re only changing the currently-loaded page. You can even see that if you inspect the source code of a page like this.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>MyApp<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">base</span> <span class="attr">href</span>=<span class="string">"/"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"icon"</span> <span class="attr">type</span>=<span class="string">"image/x-icon"</span> <span class="attr">href</span>=<span class="string">"favicon.ico"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">app-root</span>&gt;</span><span class="tag">&lt;/<span class="name">app-root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"runtime.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"polyfills.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"styles.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"vendor.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Front-end </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Angular </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>How to Make a Good First Impression</title>
      <link href="/2018/08/23/Interview/7-Seconds-Scenario/"/>
      <url>/2018/08/23/Interview/7-Seconds-Scenario/</url>
      <content type="html"><![CDATA[<blockquote><p>Reference from <a href="https://learning.linkedin.com/blog/learning-tips/body-language-to-make-a-good-impression" target="_blank" rel="noopener">LinkedinBlog</a></p></blockquote><p>When the first humans roamed this earth, they were mostly non-verbal creatures, with no shared language. Therefore, they had to make quick judgments of strangers based solely off the stranger’s body language, to conclude if they were friend or foe.</p><p>All these years later, despite the advent of language, those instincts have not left us. Science bears that out, as studies have found a person will make a decision of a stranger within seven seconds, based off their body language.</p><p>Think about the business implications of that. Within seven seconds of meeting someone, a person will conclude if you are confident or weak, interested or aloof, friend or foe – based solely off your body language. Obviously, that’s going to directly affect your ability to get leadership buy-in, close a sale or just make a friend.</p><p>So what should you do in those seven seconds to make a good impression? Body language expert Carol Kinsey Goman, in a course on LinkedIn Learning, explained there are six body language rules you should follow whenever you meet someone new. Following those six rules will signal to the person that you are confident and welcoming, and ensure you make a good impression to each new person you meet.</p><p>What are those six rules? They are:</p><h2 id="Adjust-your-attitude"><a href="#Adjust-your-attitude" class="headerlink" title="Adjust your attitude."></a>Adjust your attitude.</h2><p>Ultimately, your body language is going to reflect your attitude, Goman said. So, before meeting any person for the first time, make a conscious decision of the attitude you want to embody, and your body language will likely follow.</p><p>For example, if you want to be seen as approachable and friendly, consciously decide to adopt a friendly and approachable attitude before meeting a person. Conversely, if you walk into a meeting bored or insecure, your body language will inherently reflect that.</p><h2 id="Get-your-posture-right-with-this-exercise"><a href="#Get-your-posture-right-with-this-exercise" class="headerlink" title="Get your posture right with this exercise."></a>Get your posture right with this exercise.</h2><p>Your posture has a tremendous impact on the way people perceive you. To get your posture right, Goman suggests doing this one exercise: Raise your shoulders toward your ears, roll them back and then drop them down.</p><p>That shall cause you to stand up straight, your head to be held high and your shoulders to stay back. Not only will this posture project confidence, it’ll make you feel more confident, Goman said.</p><h2 id="Smile-in-this-specific-way"><a href="#Smile-in-this-specific-way" class="headerlink" title="Smile in this specific way."></a>Smile in this specific way.</h2><p>Our brain is hardwired to respond positively to someone who is smiling. Goman suggested smiling in this specific way when meeting someone for the first time, as it will cause them to immediately like you: Start with a small smile when you enter the room, and then widen it as you look at the person.</p><h2 id="Make-the-right-amount-of-eye-contact-using-this-method"><a href="#Make-the-right-amount-of-eye-contact-using-this-method" class="headerlink" title="Make the right amount of eye contact using this method."></a>Make the right amount of eye contact using this method.</h2><p>Strong eye contact is a way to transmit openness and energy. To make the right amount of eye contact, Goman suggested doing this: When you meet someone for the first time, make a practice of noticing the color of his or her eyes.</p><p>That will cause you to look at a person’s eyes for the right amount of time, which will make them feel like you are truly interested in what they have to say.</p><h2 id="Use-your-eyebrows-wisely"><a href="#Use-your-eyebrows-wisely" class="headerlink" title="Use your eyebrows wisely."></a>Use your eyebrows wisely.</h2><p>When greeting someone new, you can use your eyebrows to make them feel welcome. Goman suggests doing an eyebrow flash – i.e. a brief eyebrow raise – when meeting a new person while opening your eyes slightly wider than normal, which is a signal of friendly recognition.</p><h2 id="Lean-in-while-maintaining-the-right-amount-of-space"><a href="#Lean-in-while-maintaining-the-right-amount-of-space" class="headerlink" title="Lean in, while maintaining the right amount of space."></a>Lean in, while maintaining the right amount of space.</h2><p>Sheryl Sandberg might not have been literal with the title of her book, but Goman is when it comes to body language. Literally leaning in to a person when talking with them makes them feel like you are truly engaged in what they have to say.</p><p>That said, Goman recommends keeping the right amount of personal space between yourself and the person, which varies from country to country. In Brazil, for example, people tend to get closer to each other, whereas in the US, people like to have two feet of space (as Jerry Seinfeld can attest).</p><p>That’s it. If you do those six simple things, every person you meet will immediately have a good impression of you – which is an excellent way to start any interaction.</p>]]></content>
      
      <categories>
          
          <category> Skill </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Interview </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>FoxyProxy</title>
      <link href="/2018/08/23/Plugin/FoxyProxy/"/>
      <url>/2018/08/23/Plugin/FoxyProxy/</url>
      <content type="html"><![CDATA[<p><img src="https://getfoxyproxy.org/assets/img/logos/foxyproxy/main-with-starburst-frontpage.png" alt="Foxy Proxy Icon"></p><h2 id="WHAT-IS-IT"><a href="#WHAT-IS-IT" class="headerlink" title="WHAT IS IT?"></a>WHAT IS IT?</h2><p>FoxyProxy is a proxy which automatically switches an internet connection across one or more proxy servers based on URL patterns. Put simply, FoxyProxy automates the manual process of editing browser’s Connection Settings dialog. Proxy server switching occurs based on the loading URL and the switching rules you define.</p><p>FoxyProxy sells reliable, fast, secure VPN and proxy servers in <strong>96+ different countries</strong> with <strong>6 ways to connect</strong> - work with OpenVPN, IPSec, and PPTP. Our proxy servers work with HTTP, HTTPS/SSL, and SOCKS 5 on multiple ports each.</p><h2 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h2><ol><li><a href="https://chrome.google.com/webstore/detail/foxyproxy-standard/gcknhkkoolaabfmlnjonogaaifnjlfnp/" target="_blank" rel="noopener">FoxyProxy Standard (Chrome)</a></li><li><a href="https://addons.mozilla.org/en-US/firefox/addon/foxyproxy-standard/" target="_blank" rel="noopener">FoxyProxy Standard (Firefox)</a></li></ol>]]></content>
      
      <categories>
          
          <category> Tool </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Proxy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Atom</title>
      <link href="/2018/08/18/Editor/Atom/"/>
      <url>/2018/08/18/Editor/Atom/</url>
      <content type="html"><![CDATA[<div class="video-container"><iframe src="//www.youtube.com/embed/U5POoGSrtGg" frameborder="0" allowfullscreen></iframe></div><h1 id="Why-Atom"><a href="#Why-Atom" class="headerlink" title="Why Atom?"></a>Why Atom?</h1><p>There are a lot of text editors out there; why should you spend your time learning about and using Atom?</p><p>Editors like Sublime and TextMate offer convenience but only limited extensibility. On the other end of the spectrum, Emacs and Vim offer extreme flexibility, but they aren’t very approachable and can only be customized with special-purpose scripting languages.</p><p>We think we can do better. Our goal is a zero-compromise combination of hackability and usability: an editor that will be welcoming to an elementary school student on their first day learning to code, but also a tool they won’t outgrow as they develop into seasoned hackers.</p><p>As we’ve used Atom to build Atom, what began as an experiment has gradually matured into a tool we can’t live without. On the surface, Atom is the modern desktop text editor you’ve come to expect. Pop the hood, however, and you’ll discover a system begging to be hacked on.</p><h2 id="The-Nucleus-of-Atom"><a href="#The-Nucleus-of-Atom" class="headerlink" title="The Nucleus of Atom"></a>The Nucleus of Atom</h2><p>The web is not without its faults, but two decades of development has forged it into an incredibly malleable and powerful platform. So when we set out to write a text editor that we ourselves would want to extend, web technology was the obvious choice. But first, we had to free it from its chains.</p><h3 id="The-Native-Web"><a href="#The-Native-Web" class="headerlink" title="The Native Web"></a>The Native Web</h3><p>Web browsers are great for browsing web pages, but writing code is a specialized activity that warrants dedicated tools. More importantly, the browser severely restricts access to the local system for security reasons, and for us, a text editor that couldn’t write files or run local subprocesses was a non-starter.</p><p>For this reason, we didn’t build Atom as a traditional web application. Instead, Atom is a specialized variant of Chromium designed to be a text editor rather than a web browser. Every Atom window is essentially a locally-rendered web page.</p><p>All the APIs available to a typical Node.js application are also available to the code running in each window’s JavaScript context. This hybrid provides a unique client-side development experience.</p><p>Since everything is local, you don’t have to worry about asset pipelines, script concatenation, and asynchronous module definitions. If you want to load some code, just require it at the top of your file. Node’s module system makes it easy to break the system down into lots of small, focused packages.</p><h3 id="JavaScript-Meet-C"><a href="#JavaScript-Meet-C" class="headerlink" title="JavaScript, Meet C++"></a>JavaScript, Meet C++</h3><p>Interacting with native code is also really simple. For example, we wrote a wrapper around the Oniguruma regular expression engine for our TextMate grammar support. In a browser, that would have required adventures with NaCl or Esprima. Node integration made it easy.</p><p>In addition to the Node APIs, we also expose APIs for native dialogs, adding application and context menu items, manipulating the window dimensions, etc.</p><h3 id="Web-Tech-The-Fun-Parts"><a href="#Web-Tech-The-Fun-Parts" class="headerlink" title="Web Tech: The Fun Parts"></a>Web Tech: The Fun Parts</h3><p>Another great benefit, that comes with writing code for Atom, is the guarantee that it’s running on the newest version of Chromium. That means we can ignore issues like browser compatibility and polyfills. We can use all the web’s shiny features of tomorrow, today.</p><p>For example, the layout of our workspace and panes is based on flexbox. It’s an emerging standard and has gone through a lot of change since we started using it, but none of that mattered as long as it worked.</p><p>With the entire industry pushing web technology forward, we’re confident that we’re building Atom on fertile ground. Native UI technologies come and go, but the web is a standard that becomes more capable and ubiquitous with every passing year. We’re excited to dig deeper into its toolbox.</p><h2 id="An-Open-Source-Text-Editor"><a href="#An-Open-Source-Text-Editor" class="headerlink" title="An Open-Source Text Editor"></a>An Open-Source Text Editor</h2><p>We see Atom as a perfect complement to GitHub’s primary mission of building better software by working together. Atom is a long-term investment, and GitHub will continue to support its development with a dedicated team going forward. But we also know that we can’t achieve our vision for Atom alone. As Emacs and Vim have demonstrated over the past three decades, if you want to build a thriving, long-lasting community around a text editor, it has to be open source.</p><p>The entire Atom editor is free and open source and is available under the <a href="https://github.com/atom" target="_blank" rel="noopener">https://github.com/atom</a> organization.</p>]]></content>
      
      <categories>
          
          <category> Editor </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Atom </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Lombok Annotation</title>
      <link href="/2018/08/18/Java/Lombok-Annotation/"/>
      <url>/2018/08/18/Java/Lombok-Annotation/</url>
      <content type="html"><![CDATA[<h2 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h2><p>It is not uncommon for a typical Java project to devote hundreds of lines of code to the boilerplate required for defining simple data classes. These classes generally contain a number of fields, getters and setters for those fields, as well as <code>equals</code> and <code>hashCode</code> implementations. In the simplest scenarios, Project Lombok can reduce these classes to the required fields and a single <code>@Data</code> annotation.</p><p>Of course, the simplest scenarios are not necessarily the ones that developers face on a day-to-day basis. For that reason, there are a number of annotations in Project Lombok to allow for more fine grained control over the structure and behavior of a class.</p><h3 id="Getter-and-Setter"><a href="#Getter-and-Setter" class="headerlink" title="@Getter and @Setter"></a>@Getter and @Setter</h3><p>The <code>@Getter</code> and <code>@Setter</code> annotations generate a getter and setter for a field, respectively. The getters generated correctly follow convention for boolean properties, resulting in an <code>isFoo</code> getter method name instead of <code>getFoo</code> for any <code>boolean</code> field <code>foo</code>. It should be noted that if the class to which the annotated field belongs contains a method of the same name as the getter or setter to be generated, regardless of parameter or return types, no corresponding method will be generated.</p><p>Both the <code>@Getter</code> and <code>@Setter</code> annotations take an optional parameter to specify the access level for the generated method.</p><p>Lombok annotated code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span> <span class="meta">@Setter</span> <span class="keyword">private</span> <span class="keyword">boolean</span> employed = <span class="keyword">true</span>;</span><br><span class="line"><span class="meta">@Setter</span>(AccessLevel.PROTECTED) <span class="keyword">private</span> String name;</span><br></pre></td></tr></table></figure></p><p>Equivalent Java source code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> employed = <span class="keyword">true</span>;</span><br><span class="line"><span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmployed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> employed;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmployed</span><span class="params">(<span class="keyword">final</span> <span class="keyword">boolean</span> employed)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.employed = employed;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(<span class="keyword">final</span> String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="NonNull"><a href="#NonNull" class="headerlink" title="@NonNull"></a>@NonNull</h3><p>The <code>@NonNull</code> annotation is used to indicate the need for a fast-fail null check on the corresponding member. When placed on a field for which Lombok is generating a setter method, a null check will be generated that will result in a <code>NullPointerException</code> should a null value be provided. Additionally, if Lombok is generating a constructor for the owning class then the field will be added to the constructor signature and the null check will be included in the generated constructor code.</p><p>This annotation mirrors <code>@NotNull</code> and <code>@NonNull</code> annotations found in IntelliJ IDEA and FindBugs, among others. Lombok is annotation agnostic with regards to these variations on the theme. If Lombok comes across any member annotated with any annotation of the name <code>@NotNull</code> or <code>@NonNull</code>, it will honor it by generating the appropriate corresponding code. The authors of Project Lombok further comment that, in the event that annotation of this type is added to Java, then the Lombok version will be subject to removal.</p><p>Lombok annotated code from the class <code>Family</code>:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span> <span class="meta">@Setter</span> <span class="meta">@NonNull</span></span><br><span class="line"><span class="keyword">private</span> List&lt;Person&gt; members;</span><br></pre></td></tr></table></figure></p><p>Equivalent Java source code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@NonNull</span></span><br><span class="line"><span class="keyword">private</span> List&lt;Person&gt; members;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">Family</span><span class="params">(@NonNull <span class="keyword">final</span> List&lt;Person&gt; members)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (members == <span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> java.lang.NullPointerException(<span class="string">"members"</span>);</span><br><span class="line">    <span class="keyword">this</span>.members = members;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NonNull</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Person&gt; <span class="title">getMembers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> members;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMembers</span><span class="params">(@NonNull <span class="keyword">final</span> List&lt;Person&gt; members)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (members == <span class="keyword">null</span>) <span class="keyword">throw</span> <span class="keyword">new</span> java.lang.NullPointerException(<span class="string">"members"</span>);</span><br><span class="line">    <span class="keyword">this</span>.members = members;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="ToString"><a href="#ToString" class="headerlink" title="@ToString"></a>@ToString</h3><p>This annotation generates an implementation of the <code>toString</code> method. By default, any non-static fields will be included in the output of the method in name-value pairs. If desired, the inclusion of the property names in the output can be suppressed by setting the annotation parameter <code>includeFieldNames</code> to <code>false</code>.</p><p>Specific fields can be excluded from the output of the generated method by including their field names in the <code>exclude</code> parameter. Alternatively, the of parameter can be used to list only those fields which are desired in the output. The output of the <code>toString</code> method of a superclass can also be included by setting the <code>callSuper</code> parameter to true.</p><p>Lombok annotated code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ToString</span>(callSuper=<span class="keyword">true</span>, exclude=<span class="string">"someExcludedField"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">Bar</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> someBoolean = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">private</span> String someStringField;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> someExcludedField;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Equivalent Java source code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Foo</span> <span class="keyword">extends</span> <span class="title">Bar</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> someBoolean = <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">private</span> String someStringField;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">float</span> someExcludedField;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@java</span>.lang.Override</span><br><span class="line">    <span class="keyword">public</span> java.lang.<span class="function">String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Foo(super="</span> + <span class="keyword">super</span>.toString() +</span><br><span class="line">            <span class="string">", someBoolean="</span> + someBoolean +</span><br><span class="line">            <span class="string">", someStringField="</span> + someStringField + <span class="string">")"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="EqualsAndHashCode"><a href="#EqualsAndHashCode" class="headerlink" title="@EqualsAndHashCode"></a>@EqualsAndHashCode</h3><p>This class level annotation will cause Lombok to generate both <code>equals</code> and <code>hashCode</code> methods, as the two are tied together intrinsically by the <code>hashCode</code> contract. By default, any field in the class that is not static or transient will be considered by both methods. Much like <code>@ToString</code>, the <code>exclude</code> parameter is provided to prevent field from being included in the generated logic. One can also use the <code>of</code> parameter to list only those fields should be considered.</p><p>Also like <code>@ToString</code>, there is a <code>callSuper</code> parameter for this annotation. Setting it to true will cause <code>equals</code> to verify equality by calling the equals from the superclass before considering fields in the current class. For the <code>hashCode</code> method, it results in the incorporation of the results of the superclass’s <code>hashCode</code> in the calculation of the hash. When setting <code>callSuper</code> to true, be careful to make sure that the equals method in the parent class properly handles instance type checking. If the parent class checks that the class is of a specific type and not merely that the classes of the two objects are the same, this can result in undesired results. If the superclass is using a Lombok generated <code>equals</code> method, this is not an issue. However, other implementations may not handle this situation correctly. Also note that setting <code>callSuper</code> to true cannot be done when the class only extends <code>Object</code>, as it would result in an instance equality check that short-circuits the comparison of fields. This is due to the generated method calling the <code>equals</code> implementation on <code>Object</code>, which returns false if the two instances being compared are not the same instance. As a result, Lombok will generate a compile time error in this situation.</p><p>Lombok annotated code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EqualsAndHashCode</span>(callSuper=<span class="keyword">true</span>,exclude=&#123;<span class="string">"address"</span>,<span class="string">"city"</span>,<span class="string">"state"</span>,<span class="string">"zip"</span>&#125;)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">SentientBeing</span> </span>&#123;</span><br><span class="line">    <span class="keyword">enum</span> Gender &#123; Male, Female &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@NonNull</span> <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@NonNull</span> <span class="keyword">private</span> Gender gender;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String ssn;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="keyword">private</span> String state;</span><br><span class="line">    <span class="keyword">private</span> String zip;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Equivalent Java source code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">SentientBeing</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">enum</span> Gender &#123;</span><br><span class="line">        <span class="comment">/*public static final*/</span> Male <span class="comment">/* = new Gender() */</span>,</span><br><span class="line">        <span class="comment">/*public static final*/</span> Female <span class="comment">/* = new Gender() */</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@NonNull</span></span><br><span class="line">    <span class="keyword">private</span> Gender gender;</span><br><span class="line">    <span class="keyword">private</span> String ssn;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="keyword">private</span> String state;</span><br><span class="line">    <span class="keyword">private</span> String zip;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@java</span>.lang.Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(<span class="keyword">final</span> java.lang.Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">this</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (o.getClass() != <span class="keyword">this</span>.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">super</span>.equals(o)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">final</span> Person other = (Person)o;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.name == <span class="keyword">null</span> ? other.name != <span class="keyword">null</span> : !<span class="keyword">this</span>.name.equals(other.name)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.gender == <span class="keyword">null</span> ? other.gender != <span class="keyword">null</span> : !<span class="keyword">this</span>.gender.equals(other.gender)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.ssn == <span class="keyword">null</span> ? other.ssn != <span class="keyword">null</span> : !<span class="keyword">this</span>.ssn.equals(other.ssn)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@java</span>.lang.Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> PRIME = <span class="number">31</span>;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">1</span>;</span><br><span class="line">        result = result * PRIME + <span class="keyword">super</span>.hashCode();</span><br><span class="line">        result = result * PRIME + (<span class="keyword">this</span>.name == <span class="keyword">null</span> ? <span class="number">0</span> : <span class="keyword">this</span>.name.hashCode());</span><br><span class="line">        result = result * PRIME + (<span class="keyword">this</span>.gender == <span class="keyword">null</span> ? <span class="number">0</span> : <span class="keyword">this</span>.gender.hashCode());</span><br><span class="line">        result = result * PRIME + (<span class="keyword">this</span>.ssn == <span class="keyword">null</span> ? <span class="number">0</span> : <span class="keyword">this</span>.ssn.hashCode());</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>###® @Data<br>The <code>@Data</code> annotation is likely the most frequently used annotation in the Project Lombok toolset. It combines the functionality of <code>@ToString</code>, <code>@EqualsAndHashCode</code>, <code>@Getter</code> and <code>@Setter</code>. Essentially, using <code>@Data</code> on a class is the same as annotating the class with a default <code>@ToString</code> and <code>@EqualsAndHashCode</code> as well as annotating each field with both <code>@Getter</code> and <code>@Setter</code>. Annotation a class with <code>@Data</code> also triggers Lombok’s constructor generation. This adds a public constructor that takes any <code>@NonNull</code> or <code>final</code> fields as parameters. This provides everything needed for a Plain Old Java Object (POJO).</p><p>While <code>@Data</code> is extremely useful, it does not provide the same granularity of control as the other Lombok annotations. In order to override the default method generation behaviors, annotate the class, field or method with one of the other Lombok annotations and specify the necessary parameter values to achieve the desired effect.</p><p><code>@Data</code> does provide a single parameter option that can be used to generate a static factory method. Setting the value of the <code>staticConstructor</code> parameter to the desired method name will cause Lombok to make the generated constructor private and expose a a static factory method of the given name.</p><p>Lombok annotated code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span>(staticConstructor=<span class="string">"of"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Company</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Person founder;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Person&gt; employees;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Equivalent Java source code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Company</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Person founder;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Person&gt; employees;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Company</span><span class="params">(<span class="keyword">final</span> Person founder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.founder = founder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Company <span class="title">of</span><span class="params">(<span class="keyword">final</span> Person founder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Company(founder);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Person <span class="title">getFounder</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> founder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(<span class="keyword">final</span> String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Person&gt; <span class="title">getEmployees</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> employees;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEmployees</span><span class="params">(<span class="keyword">final</span> List&lt;Person&gt; employees)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.employees = employees;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@java</span>.lang.Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(<span class="keyword">final</span> java.lang.Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">this</span>) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (o.getClass() != <span class="keyword">this</span>.getClass()) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">final</span> Company other = (Company)o;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.founder == <span class="keyword">null</span> ? other.founder != <span class="keyword">null</span> : !<span class="keyword">this</span>.founder.equals(other.founder)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.name == <span class="keyword">null</span> ? other.name != <span class="keyword">null</span> : !<span class="keyword">this</span>.name.equals(other.name)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.employees == <span class="keyword">null</span> ? other.employees != <span class="keyword">null</span> : !<span class="keyword">this</span>.employees.equals(other.employees)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@java</span>.lang.Override</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">int</span> PRIME = <span class="number">31</span>;</span><br><span class="line">        <span class="keyword">int</span> result = <span class="number">1</span>;</span><br><span class="line">        result = result * PRIME + (<span class="keyword">this</span>.founder == <span class="keyword">null</span> ? <span class="number">0</span> : <span class="keyword">this</span>.founder.hashCode());</span><br><span class="line">        result = result * PRIME + (<span class="keyword">this</span>.name == <span class="keyword">null</span> ? <span class="number">0</span> : <span class="keyword">this</span>.name.hashCode());</span><br><span class="line">        result = result * PRIME + (<span class="keyword">this</span>.employees == <span class="keyword">null</span> ? <span class="number">0</span> : <span class="keyword">this</span>.employees.hashCode());</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@java</span>.lang.Override</span><br><span class="line">    <span class="keyword">public</span> java.lang.<span class="function">String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Company(founder="</span> + founder + <span class="string">", name="</span> + name + <span class="string">", employees="</span> + employees + <span class="string">")"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Cleanup"><a href="#Cleanup" class="headerlink" title="@Cleanup"></a>@Cleanup</h3><p>The <code>@Cleanup</code> annotation can be used to ensure that allocated resources are released. When a local variable is annotated with <code>@Cleanup</code>, any subsequent code is wrapped in a <code>try/finally</code> block that guarantees that the cleanup method is called at the end of the current scope. By default <code>@Cleanup</code> assumes that the cleanup method is named “close”, as with input and output streams. However, a different method name can be provided to the annotation’s <code>value</code> parameter. Only cleanup methods which take no parameters are able to be used with this annotation.</p><p>There is also a caveat to consider when using the <code>@Cleanup</code> annotation. In the event that an exception is thrown by the cleanup method, it will preempt any exception that was thrown in the method body. This can result in the actual cause of an issue being buried and should be considered when choosing to use Project Lombok’s resource management. Furthermore, with automatic resource management on the horizon in Java 7, this particular annotation is likely to be relatively short-lived.</p><p>Lombok annotated code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCleanUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="meta">@Cleanup</span> ByteArrayOutputStream baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">        baos.write(<span class="keyword">new</span> <span class="keyword">byte</span>[] &#123;<span class="string">'Y'</span>,<span class="string">'e'</span>,<span class="string">'s'</span>&#125;);</span><br><span class="line">        System.out.println(baos.toString());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Equivalent Java source code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testCleanUp</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        ByteArrayOutputStream baos = <span class="keyword">new</span> ByteArrayOutputStream();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            baos.write(<span class="keyword">new</span> <span class="keyword">byte</span>[]&#123;<span class="string">'Y'</span>, <span class="string">'e'</span>, <span class="string">'s'</span>&#125;);</span><br><span class="line">            System.out.println(baos.toString());</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            baos.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Synchronized"><a href="#Synchronized" class="headerlink" title="@Synchronized"></a>@Synchronized</h3><p>Using the <code>synchronized</code> keyword on a method can result in unfortunate effects, as any developer who has worked on multi-threaded software can attest. The synchronized keyword will lock on the current object (<code>this</code>) in the case of an instance method or on the <code>class</code> object for a static method. This means that there is the potential for code outside of the control of the developer to lock on the same object, resulting in a deadlock. It is generally advisable to instead lock explicitly on a separate object that is dedicated solely to that purpose and not exposed in such a way as to allow unsolicited locking. Project Lombok provides the <code>@Synchronized</code> annotation for that very purpose.</p><p>Annotating an instance method with <code>@Synchronized</code> will prompt Lombok to generate a private locking field named <code>$lock</code> on which the method will lock prior to executing. Similarly, annotating a static method in the same way will generate a private static object named <code>$LOCK</code> for the static method to use in an identical fashion. A different locking object can be specified by providing a field name to the annotation’s <code>value</code> parameter. When a field name is provided, the developer must define the property as Lombok will not generate it.</p><p>Lombok annotated code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> DateFormat format = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"MM-dd-YYYY"</span>);</span><br><span class="line"></span><br><span class="line"><span class="meta">@Synchronized</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">synchronizedFormat</span><span class="params">(Date date)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> format.format(date);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Equivalent Java source code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> java.lang.Object $lock = <span class="keyword">new</span> java.lang.Object[<span class="number">0</span>];</span><br><span class="line"><span class="keyword">private</span> DateFormat format = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"MM-dd-YYYY"</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">synchronizedFormat</span><span class="params">(Date date)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">synchronized</span> ($lock) &#123;</span><br><span class="line">        <span class="keyword">return</span> format.format(date);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="SneakyThrows"><a href="#SneakyThrows" class="headerlink" title="@SneakyThrows"></a>@SneakyThrows</h3><p><code>@SneakyThrows</code> is probably the Project Lombok annotation with the most detractors, since it is a direct assault on checked exceptions. There is a lot of disagreement with regards to the use of checked exceptions, with a large number of developers holding that they are a failed experiment. These developers will love <code>@SneakyThrows</code>. Those developers on the other side of the checked/unchecked exception fence will most likely view this as hiding potential problems.</p><p>Throwing <code>IllegalAccessException</code> would normally generate an “Unhandled exception” error if <code>IllegalAccessException</code>, or some parent class, is not listed in a throws clause.<br><img src="https://jnb.ociweb.com/jnb/jnbJan2010_files/jnbJan2010-UnhandledException.png" alt="Throw Clause::Before"><br>When annotated with <code>@SneakyThrows</code>, the error goes away.<br><img src="https://jnb.ociweb.com/jnb/jnbJan2010_files/jnbJan2010-SneakyThrows.png" alt="Throw Clause::After"><br>By default, <code>@SneakyThrows</code> will allow any checked exception to be thrown without declaring in the <code>throws</code> clause. This can be limited to a particular set of exceptions by providing an array of throwable classes (<code>Class&lt;? extends Throwable&gt;</code>) to the <code>value</code> parameter of the annotation.</p><p>Lombok annotated code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SneakyThrows</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSneakyThrows</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalAccessException();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Equivalent Java source code:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testSneakyThrows</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> IllegalAccessException();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (java.lang.Throwable $ex) &#123;</span><br><span class="line">        <span class="keyword">throw</span> lombok.Lombok.sneakyThrow($ex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>A look at the above code and the signature of <code>Lombok.sneakyThrow(Throwable)</code> would lead most to believe that the exception is being wrapped in a <code>RuntimeException</code> and re-thrown, however this is not the case. The <code>sneakyThrow</code> method will never return normally and will instead throw the provided throwable completely unaltered.</p>]]></content>
      
      <categories>
          
          <category> Java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Lombok </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
